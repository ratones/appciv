!function e(t,n,i){function r(o,l){if(!n[o]){if(!t[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){(function(e){function t(e,t){for(var n=0,i=e.length-1;i>=0;i--){var r=e[i];"."===r?e.splice(i,1):".."===r?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],i=0;i<e.length;i++)t(e[i],i,e)&&n.push(e[i]);return n}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(e){return r.exec(e).slice(1)};n.resolve=function(){for(var n="",r=!1,a=arguments.length-1;a>=-1&&!r;a--){var o=a>=0?arguments[a]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(n=o+"/"+n,r="/"===o.charAt(0))}return n=t(i(n.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+n||"."},n.normalize=function(e){var r=n.isAbsolute(e),a="/"===o(e,-1);return e=t(i(e.split("/"),function(e){return!!e}),!r).join("/"),e||r||(e="."),e&&a&&(e+="/"),(r?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(i(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var r=i(e.split("/")),a=i(t.split("/")),o=Math.min(r.length,a.length),l=o,s=0;s<o;s++)if(r[s]!==a[s]){l=s;break}for(var u=[],s=l;s<r.length;s++)u.push("..");return u=u.concat(a.slice(l)),u.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=a(e),n=t[0],i=t[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},n.basename=function(e,t){var n=a(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return a(e)[3]};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:2}],2:[function(e,t,n){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(d===setTimeout)return setTimeout(e,0);if((d===i||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function o(e){if(p===clearTimeout)return clearTimeout(e);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function l(){b&&h&&(b=!1,h.length?v=h.concat(v):m=-1,v.length&&s())}function s(){if(!b){var e=a(l);b=!0;for(var t=v.length;t;){for(h=v,v=[];++m<t;)h&&h[m].run();m=-1,t=v.length}h=null,b=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var d,p,f=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:i}catch(e){d=i}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(e){p=r}}();var h,v=[],b=!1,m=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new u(e,t)),1!==v.length||b||a(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],3:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(){var e=new l.HandlebarsEnvironment;return f.extend(e,l),e.SafeString=u.default,e.Exception=d.default,e.Utils=f,e.escapeExpression=f.escapeExpression,e.VM=v,e.template=function(t){return v.template(t,e)},e}n.__esModule=!0;var o=e("./handlebars/base"),l=r(o),s=e("./handlebars/safe-string"),u=i(s),c=e("./handlebars/exception"),d=i(c),p=e("./handlebars/utils"),f=r(p),h=e("./handlebars/runtime"),v=r(h),b=e("./handlebars/no-conflict"),m=i(b),y=a();y.create=a,m.default(y),y.default=y,n.default=y,t.exports=n.default},{"./handlebars/base":4,"./handlebars/exception":7,"./handlebars/no-conflict":17,"./handlebars/runtime":18,"./handlebars/safe-string":19,"./handlebars/utils":20}],4:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},s.registerDefaultHelpers(this),u.registerDefaultDecorators(this)}n.__esModule=!0,n.HandlebarsEnvironment=r;var a=e("./utils"),o=e("./exception"),l=i(o),s=e("./helpers"),u=e("./decorators"),c=e("./logger"),d=i(c),p="4.0.5";n.VERSION=p;var f=7;n.COMPILER_REVISION=f;var h={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};n.REVISION_CHANGES=h;var v="[object Object]";r.prototype={constructor:r,logger:d.default,log:d.default.log,registerHelper:function(e,t){if(a.toString.call(e)===v){if(t)throw new l.default("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(a.toString.call(e)===v)a.extend(this.partials,e);else{if("undefined"==typeof t)throw new l.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(a.toString.call(e)===v){if(t)throw new l.default("Arg not supported with multiple decorators");a.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var b=d.default.log;n.log=b,n.createFrame=a.createFrame,n.logger=d.default},{"./decorators":5,"./exception":7,"./helpers":8,"./logger":16,"./utils":20}],5:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){o.default(e)}n.__esModule=!0,n.registerDefaultDecorators=r;var a=e("./decorators/inline"),o=i(a)},{"./decorators/inline":6}],6:[function(e,t,n){"use strict";n.__esModule=!0;var i=e("../utils");n.default=function(e){e.registerDecorator("inline",function(e,t,n,r){var a=e;return t.partials||(t.partials={},a=function(r,a){var o=n.partials;n.partials=i.extend({},o,t.partials);var l=e(r,a);return n.partials=o,l}),t.partials[r.args[0]]=r.fn,a})},t.exports=n.default},{"../utils":20}],7:[function(e,t,n){"use strict";function i(e,t){var n=t&&t.loc,a=void 0,o=void 0;n&&(a=n.start.line,o=n.start.column,e+=" - "+a+":"+o);for(var l=Error.prototype.constructor.call(this,e),s=0;s<r.length;s++)this[r[s]]=l[r[s]];Error.captureStackTrace&&Error.captureStackTrace(this,i),n&&(this.lineNumber=a,this.column=o)}n.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];i.prototype=new Error,n.default=i,t.exports=n.default},{}],8:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){o.default(e),s.default(e),c.default(e),p.default(e),h.default(e),b.default(e),y.default(e)}n.__esModule=!0,n.registerDefaultHelpers=r;var a=e("./helpers/block-helper-missing"),o=i(a),l=e("./helpers/each"),s=i(l),u=e("./helpers/helper-missing"),c=i(u),d=e("./helpers/if"),p=i(d),f=e("./helpers/log"),h=i(f),v=e("./helpers/lookup"),b=i(v),m=e("./helpers/with"),y=i(m)},{"./helpers/block-helper-missing":9,"./helpers/each":10,"./helpers/helper-missing":11,"./helpers/if":12,"./helpers/log":13,"./helpers/lookup":14,"./helpers/with":15}],9:[function(e,t,n){"use strict";n.__esModule=!0;var i=e("../utils");n.default=function(e){e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse,a=n.fn;if(t===!0)return a(this);if(t===!1||null==t)return r(this);if(i.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):r(this);if(n.data&&n.ids){var o=i.createFrame(n.data);o.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:o}}return a(t,n)})},t.exports=n.default},{"../utils":20}],10:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var r=e("../utils"),a=e("../exception"),o=i(a);n.default=function(e){e.registerHelper("each",function(e,t){function n(t,n,a){u&&(u.key=t,u.index=n,u.first=0===n,u.last=!!a,c&&(u.contextPath=c+t)),s+=i(e[t],{data:u,blockParams:r.blockParams([e[t],t],[c+t,null])})}if(!t)throw new o.default("Must pass iterator to #each");var i=t.fn,a=t.inverse,l=0,s="",u=void 0,c=void 0;if(t.data&&t.ids&&(c=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),r.isFunction(e)&&(e=e.call(this)),t.data&&(u=r.createFrame(t.data)),e&&"object"==typeof e)if(r.isArray(e))for(var d=e.length;l<d;l++)l in e&&n(l,l,l===e.length-1);else{var p=void 0;for(var f in e)e.hasOwnProperty(f)&&(void 0!==p&&n(p,l-1),p=f,l++);void 0!==p&&n(p,l-1,!0)}return 0===l&&(s=a(this)),s})},t.exports=n.default},{"../exception":7,"../utils":20}],11:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var r=e("../exception"),a=i(r);n.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new a.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=n.default},{"../exception":7}],12:[function(e,t,n){"use strict";n.__esModule=!0;var i=e("../utils");n.default=function(e){e.registerHelper("if",function(e,t){return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},t.exports=n.default},{"../utils":20}],13:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)t.push(arguments[i]);var r=1;null!=n.hash.level?r=n.hash.level:n.data&&null!=n.data.level&&(r=n.data.level),t[0]=r,e.log.apply(e,t)})},t.exports=n.default},{}],14:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},t.exports=n.default},{}],15:[function(e,t,n){"use strict";n.__esModule=!0;var i=e("../utils");n.default=function(e){e.registerHelper("with",function(e,t){i.isFunction(e)&&(e=e.call(this));var n=t.fn;if(i.isEmpty(e))return t.inverse(this);var r=t.data;return t.data&&t.ids&&(r=i.createFrame(t.data),r.contextPath=i.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:r,blockParams:i.blockParams([e],[r&&r.contextPath])})})},t.exports=n.default},{"../utils":20}],16:[function(e,t,n){"use strict";n.__esModule=!0;var i=e("./utils"),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=i.indexOf(r.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=r.lookupLevel(e),"undefined"!=typeof console&&r.lookupLevel(r.level)<=e){var t=r.methodMap[e];console[t]||(t="log");for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];console[t].apply(console,i)}}};n.default=r,t.exports=n.default},{"./utils":20}],17:[function(e,t,n){(function(e){"use strict";n.__esModule=!0,n.default=function(t){var n="undefined"!=typeof e?e:window,i=n.Handlebars;t.noConflict=function(){return n.Handlebars===t&&(n.Handlebars=i),t}},t.exports=n.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){var t=e&&e[0]||1,n=m.COMPILER_REVISION;if(t!==n){if(t<n){var i=m.REVISION_CHANGES[n],r=m.REVISION_CHANGES[t];throw new b.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new b.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function o(e,t){function n(n,i,r){r.hash&&(i=h.extend({},i,r.hash),r.ids&&(r.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,i,r);var a=t.VM.invokePartial.call(this,n,i,r);if(null==a&&t.compile&&(r.partials[r.name]=t.compile(n,e.compilerOptions,t),a=r.partials[r.name](i,r)),null!=a){if(r.indent){for(var o=a.split("\n"),l=0,s=o.length;l<s&&(o[l]||l+1!==s);l++)o[l]=r.indent+o[l];a=o.join("\n")}return a}throw new b.default("The partial "+r.name+" could not be compiled when running in runtime-only mode")}function i(t){function n(t){return""+e.main(r,t,r.helpers,r.partials,o,s,l)}var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=a.data;i._setup(a),!a.partial&&e.useData&&(o=d(t,o));var l=void 0,s=e.useBlockParams?[]:void 0;return e.useDepths&&(l=a.depths?t!==a.depths[0]?[t].concat(a.depths):a.depths:[t]),(n=p(e.main,n,r,a.depths||[],o,s))(t,a)}if(!t)throw new b.default("No environment passed to template");if(!e||!e.main)throw new b.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var r={strict:function(e,t){if(!(t in e))throw new b.default('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,i=0;i<n;i++)if(e[i]&&null!=e[i][t])return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:h.escapeExpression,invokePartial:n,fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,i,r){var a=this.programs[e],o=this.fn(e);return t||r||i||n?a=l(this,e,o,t,n,i,r):a||(a=this.programs[e]=l(this,e,o)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=h.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler};return i.isTop=!0,i._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials,r.decorators=n.decorators):(r.helpers=r.merge(n.helpers,t.helpers),e.usePartial&&(r.partials=r.merge(n.partials,t.partials)),(e.usePartial||e.useDecorators)&&(r.decorators=r.merge(n.decorators,t.decorators)))},i._child=function(t,n,i,a){if(e.useBlockParams&&!i)throw new b.default("must pass block params");if(e.useDepths&&!a)throw new b.default("must pass parent depths");return l(r,t,e[t],n,0,i,a)},i}function l(e,t,n,i,r,a,o){function l(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],l=o;return o&&t!==o[0]&&(l=[t].concat(o)),n(e,t,e.helpers,e.partials,r.data||i,a&&[r.blockParams].concat(a),l)}return l=p(n,l,e,o,i,a),l.program=t,l.depth=o?o.length:0,l.blockParams=r||0,l}function s(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],e}function u(e,t,n){n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var i=void 0;if(n.fn&&n.fn!==c&&(n.data=m.createFrame(n.data),i=n.data["partial-block"]=n.fn,i.partials&&(n.partials=h.extend({},n.partials,i.partials))),void 0===e&&i&&(e=i),void 0===e)throw new b.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)}function c(){return""}function d(e,t){return t&&"root"in t||(t=t?m.createFrame(t):{},t.root=e),t}function p(e,t,n,i,r,a){if(e.decorator){var o={};t=e.decorator(t,o,n,i&&i[0],r,a,i),h.extend(t,o)}return t}n.__esModule=!0,n.checkRevision=a,n.template=o,n.wrapProgram=l,n.resolvePartial=s,n.invokePartial=u,n.noop=c;var f=e("./utils"),h=r(f),v=e("./exception"),b=i(v),m=e("./base")},{"./base":4,"./exception":7,"./utils":20}],19:[function(e,t,n){"use strict";function i(e){this.string=e}n.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},n.default=i,t.exports=n.default},{}],20:[function(e,t,n){"use strict";function i(e){return d[e]}function r(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function a(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}function o(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return f.test(e)?e.replace(p,i):e}function l(e){return!e&&0!==e||!(!b(e)||0!==e.length)}function s(e){var t=r({},e);return t._parent=e,t}function u(e,t){return e.path=t,e}function c(e,t){return(e?e+".":"")+t}n.__esModule=!0,n.extend=r,n.indexOf=a,n.escapeExpression=o,n.isEmpty=l,n.createFrame=s,n.blockParams=u,n.appendContextPath=c;var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},p=/[&<>"'`=]/g,f=/[&<>"'`=]/,h=Object.prototype.toString;n.toString=h;var v=function(e){return"function"==typeof e};v(/x/)&&(n.isFunction=v=function(e){return"function"==typeof e&&"[object Function]"===h.call(e)}),n.isFunction=v;var b=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===h.call(e)};n.isArray=b},{}],21:[function(e,t,n){t.exports=e("./dist/cjs/handlebars.runtime").default},{"./dist/cjs/handlebars.runtime":3}],22:[function(e,t,n){t.exports=e("handlebars/runtime").default},{"handlebars/runtime":21}],23:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=e("./util.js"),a=i(r),o=e("./proxy"),l=i(o),s=e("./config"),u=i(s),c=requireNode("nw.gui");window.addEventListener("resize",function(){w2ui.layout.resize()}),Number.prototype.pad=function(e){for(var t=String(this);t.length<(e||2);)t="0"+t;return t};var d=function(){e("./main").start({callback:function(){f.show()}})},p=function(){l.default.startServer(),l.default.setAjaxOptions();var t=e("./autoupdate");t.update(function(e){console.log(e),e?(w2utils.unlock("body"),d(),w2alert(e)):(w2utils.unlock("body"),d())})},f=c.Window.get(),h=String(c.App.argv[0]);a.default.enviroment=h;var v;switch(h){case"dev":v=u.default.modules.appciv.dev_server;break;case"prod_int":v=u.default.modules.appciv.intranet_server;break;case"prod_ext":v=u.default.modules.appciv.external_server}var b=localStorage.getItem("proxy"),m=!1;if(b){var y=JSON.parse(b);m=!!y.enabled}else m=!0;var g=nw.App.getProxyForURL(v);g.split(" ").indexOf("PROXY")!==-1&&m?(console.log("need proxy"),e("./proxycheck").setproxy(g.split(" ")[1],p)):p();var w=localStorage.getItem("session");if(w){var _=JSON.parse(w);_.url="http://localhost",delete _.hostOnly,delete _.session,f.cookies.set(_)}f.on("close",function(){f.cookies.get({url:"http://localhost",name:".authDOT"},function(e){e&&localStorage.setItem("session",JSON.stringify(e)),f.close(!0)})})},{"./autoupdate":24,"./config":64,"./main":68,"./proxy":82,"./proxycheck":83,"./util.js":85}],24:[function(e,t,n){(function(n){"use strict";var i=(e("./util"),requireNode("nw.gui")),r=i.App.manifest,a=e("path"),o=requireNode("node-webkit-updater"),l=new o(r),s=function(){this.update=function(e){var t=i.App.argv.indexOf("devtest");return t>-1?void e():void l.checkNewVersion(function(t,r,o){!t&&r?(console.log("update needed"),w2utils.unlock("body"),w2utils.lock("body",'<i style="color:red">Va rugam asteptati!<br>Aplicatia se actualizeaza<br>si ve reporni in cateva <br>momente!</i>',!0),console.log("start download"),l.download(function(t,r){if(t)w2alert("Eroare de conexiune!"),e();else{if(console.log("downloaded"),".zip"!==a.extname(r))return i.Shell.openItem(r),void i.App.quit();l.unpack(r,function(e,t){if(!e){var r=a.dirname(n.process.mainModule.filename),o=t.indexOf("\\")>-1?"\\":"/",s=t.split(o).slice(0,-1).join(o),u=(a.join(r,"AplicatieCIV.exe"),[s,i.App.argv[0]]);console.log(u),console.log(l.getAppExec()),l.copyApp(s,r,function(){l.runInstaller(l.getAppExec(),u,{}),i.App.quit()})}},o)}},o)):t?(console.info(t),e(t)):(console.info("App up to date"),e())})}};t.exports=new s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./util":85,path:1}],25:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=e("./controller"),s=i(l),u=e("./router"),c=i(u),d=e("./models/vehicul"),p=i(d),f=e("./models/atribut"),h=(i(f),e("./models/anvelopa")),v=(i(h),e("./models/cerere")),b=(i(v),e("./collections/vehicule")),m=(i(b),e("./collections/atribute")),y=i(m),g=e("./collections/anvelope"),w=i(g),_=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.controller=new s.default,e.router=new c.default({controller:e.controller}),e.router.onRoute=function(e,t,n){var i=n[0].split("/");app.trigger("app:request",{app:"cereri",page:i[0],params:i[1]})},Backbone.associate(p.default,{Atribute:{type:y.default},Anvelope:{type:w.default}}),e}return o(t,e),t}(Mn.Object);n.default=_},{"./collections/anvelope":26,"./collections/atribute":27,"./collections/vehicule":29,"./controller":32,"./models/anvelopa":34,"./models/atribut":35,"./models/cerere":36,"./models/vehicul":38,"./router":40}],26:[function(e,t,n){"use strict";var i=e("./../models/anvelopa"),r=window.Backbone.SCollection.extend({model:i,id_vehicul:void 0,initialize:function(e,t){void 0!==t&&(this.id_vehicul=t.id_vehicul)},url:function(){return app.baseUrl+"/vehicule/getanvelopevehicul/"+this.id_vehicul},byEchipare:function(e){var t=this.filter(function(e){return 1===e.get("echip")});return new r(t)},undeleted:function(){var e=this.filter(function(e){return 2!==e.get("EntityState")});return new r(e)}});t.exports=r},{"./../models/anvelopa":34}],27:[function(e,t,n){"use strict";var i=e("./../models/atribut"),r=window.Backbone.SCollection.extend({model:i,id_vehicul:void 0,initialize:function(e,t){void 0!==t&&(this.id_vehicul=t.id_vehicul)},url:function(){return app.baseUrl+"/vehicule/getatributevehicul/"+this.id_vehicul},byGroup:function(e){return filtered=this.filter(function(t){return t.get("grupa")===e}),new r(filtered)}});t.exports=r},{"./../models/atribut":35}],28:[function(e,t,n){"use strict";var i=e("./../models/nanvelopa"),r=window.Backbone.SCollection.extend({model:i,initialize:function(e,t){},url:function(){},active:function(){var e=this.filter(function(e){return e.get("disabled")!==!0});return new r(e)}});t.exports=r},{"./../models/nanvelopa":37}],29:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./../models/vehicul"),u=i(s),c=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.model=u.default,n}return o(t,e),l(t,[{key:"meta",value:function(e,t){return void 0===t?this._meta[e]:void(this._meta[e]=t)}},{key:"url",value:function e(){var e=app.baseUrl+"/vehicule/getvehicule";return this.id_comanda&&(e+="/"+this.id_comanda),e}},{key:"initialize",value:function(e,t){t&&t.fk&&(this.id_comanda=t.fk),this._meta={}}},{key:"parse",value:function(e){return this.meta("totalSize",e.iTotalRecords),this.meta("filteredSize",e.iTotalDisplayRecords),e.aaData}},{key:"setFilter",value:function(e){this.url=app.baseUrl+"vehicule/getVehicule/"+this.id_comanda,this.url=this.url+"?"+e}},{key:"addFilter",value:function(e){this.url=app.baseUrl+this.url+e}}]),t}(Backbone.SCollection);n.default=c},{"./../models/vehicul":38}],30:[function(e,t,n){"use strict";var i=e("./../models/vehiculciv");t.exports=Backbone.Collection.extend({model:i})},{"./../models/vehiculciv":39}],31:[function(e,t,n){"use strict";var i={index:function(){var e=this;return{name:"gridCereri",url:app.baseUrl+"/comenzi/getComenzi",method:"POST",recid:"id",fixedBody:!0,show:{toolbar:!0,footer:!0,toolbarAdd:!0,toolbarDelete:e.allowDelete,expandColumn:!0},toolbar:{items:[{type:"button",id:"btnEdit",caption:"Editare",icon:"w2ui-icon-pencil",onClick:function(e){app.Cereri.controller.editCerere(w2ui.gridCereri.getSelection())}},{type:"button",disabled:!0,caption:"Excel",icon:"w2ui-icon-file",id:"btnExcel",onClick:function(e){app.router.navigate("cereri/spreadsheetVehicule/"+w2ui.gridCereri.getSelection(),!0)}},{type:"break"},{type:"button",id:"btnJurnal",caption:"Jurnal",icon:"w2ui-icon-search",onClick:function(t){e.getJurnal(w2ui.gridCereri.getSelection())}},{type:"button",id:"btnUpload",caption:"Alege fisier",icon:"w2ui-icon-upload",onClick:function(t){e.choosefile()}},{type:"button",id:"btnPlata",caption:"Instiintare plata",icon:"w2ui-icon-eur",onClick:function(e){app.Cereri.controller.detaliiPlataCerere(w2ui.gridCereri.getSelection())}},{type:"button",id:"btnRaport",caption:"Raport",icon:"w2ui-icon-print",disabled:!0,onClick:function(t){e.getRaport(w2ui.gridCereri.getSelection())}},{type:"break"},{type:"button",id:"btnPostComanda",caption:"Transmite comanda!",icon:"w2ui-icon-send",onClick:function(t){w2confirm("Sigur finalizati aceasta comanda?").yes(function(t){w2ui.gridCereri.lock();var n=w2ui.gridCereri.getSelection();app.Cereri.controller.transmitComanda(n,e.refreshGrid)})}},e.allowPrint?{type:"button",id:"btnPrintCIV",caption:"Tipar",icon:"w2ui-icon-print",disabled:!0,onClick:function(t){e.printRaport(w2ui.gridCereri.getSelection())}}:{},e.allowPrint?{type:"button",id:"btnArhivareCIV",caption:"Arhivare",icon:"w2ui-icon-file",disabled:!0,onClick:function(t){e.arhivareCIV(w2ui.gridCereri.getSelection())}}:{}]},onDblClick:function(e){var t=w2ui.gridCereri.get(e.recid);t.depusa<10&&app.Cereri.controller.editCerere(e.recid)},multiSearch:!1,searches:[{field:"id",caption:"Nr.Comanda ",type:"text"},{field:"data_comanda",caption:"Data",type:"date"},{field:"nr_inreg_soc",caption:"Nr client",type:"text"},{field:"data_inreg",caption:"Data client",type:"date"},{field:"societate",caption:"Beneficiar",type:"text"},{field:"stare_comanda",caption:"Stare",type:"list",options:{items:["Finalizata","In lucru","Prelucrata","Depusa"]}},{field:"vin",caption:"V.I.N.",type:"text"},{field:"serie_civ",caption:"Serie CIV",type:"text"},{field:"nr_registru",caption:"Nr registru",type:"text"}],onSearch:function(e){if(e.multi)for(var t in e.searchData){var n=e.searchData[t];if("stare_comanda"===n.field){switch(n.field="depusa",n.value){case"In lucru":n.value="(0,1,2,3,4)";break;case"Finalizata":n.value="15";break;case"Depusa":n.value="(10,11,12,15)";break;case"Prelucrata":n.value="11"}n.operator="isin"}}else for(var t in e.searchData){var n=e.searchData[t];"date"===n.type&&(n.type="text")}},columns:[{field:"id",caption:"Nr.Comanda",size:"150px",sortable:!0},{field:"data_comanda",caption:"Data",size:"220px",sortable:!0},{field:"data_transmitere",caption:"Data transmitere",size:"220px",sortable:!0},{field:"nr_inreg_soc",caption:"Nr client",size:"100px",sortable:!0},{field:"societate",caption:"Beneficiar",size:"30%",sortable:!0},{field:"data_inreg",caption:"Data client",size:"120px",sortable:!0},{field:"stare_plata",caption:"Stare plata",size:"150px",sortable:!0,render:function(e){switch(e.stare_plata){case 1:return'<b style="color:green">ACHITAT</b>';case 2:return'<b style="color:red">NEACHITAT</b>';default:return"<b>NEPRELUCRAT</b>"}}},{field:"stare_comanda",caption:"Stare",size:"25%",sortable:!0,render:function(e){var t="",n="";switch(e.depusa){case 0:t="label label-default",n="Adaugati vehicule";break;case 1:n="In lucru - OK",t="label label-primary";break;case 2:case 3:n="In lucru - Vehicule invalide",t="label label-warning";break;case 4:n="In lucru - Vehicule invalide",t="label label-danger";break;case 10:n="Depusa - asteapta prelucrare",t="label label-waiting";break;case 11:n="Prelucrata - OK",t="label label-ready";break;case 12:n="In prelucrare",t="label label-waiting";break;case 9:n="In eroare - vehicule netransmise",t="label label-warning";break;case 15:n="Finalizata",t="label label-success"}return'<div style="width:200px;float:left">'+n+'</div><label style="font-size:9px" class="'+t+'">&nbsp;&nbsp;&nbsp;</label>'}},{field:"countvehicule",caption:"Nr. Vehicule",size:"100px",sortable:!0}],parser:function(e){var t=$.parseJSON(e);return{status:"success",total:t.records,records:t.rows}},onAdd:function(e){app.Cereri.controller.editCerere()},onSelect:function(e){e.onComplete=function(){var t=w2ui.gridCereri.get(e.recid);2===t.stare_plata&&w2ui.gridCereri.toolbar.enable("btnPlata"),0!==t.depusa&&w2ui.gridCereri.toolbar.enable("btnJurnal"),15===t.depusa&&1===t.stare_plata&&w2ui.gridCereri.toolbar.enable("btnArhivareCIV"),15===t.depusa&&w2ui.gridCereri.toolbar.enable("btnRaport"),11==t.depusa&&w2ui.gridCereri.toolbar.enable("btnPrintCIV"),11!=t.depusa&&15!==t.depusa||w2ui.gridCereri.toolbar.enable("btnArhivareCIV"),t.depusa<10?(w2ui.gridCereri.toolbar.enable("btnEdit"),w2ui.gridCereri.toolbar.enable("w2ui-delete"),w2ui.gridCereri.toolbar.enable("btnUpload"),w2ui.gridCereri.toolbar.enable("btnExcel"),1===t.depusa&&w2ui.gridCereri.toolbar.enable("btnPostComanda")):(w2ui.gridCereri.toolbar.disable("btnEdit"),w2ui.gridCereri.toolbar.disable("w2ui-delete"))}},onLoad:e.disableGridButtons,onUnselect:e.disableGridButtons,onCollapse:function(){w2ui.hasOwnProperty("gridVehicule_"+event.recid)&&w2ui["gridVehicule_"+event.recid].destroy()},onExpand:function(e){w2ui.hasOwnProperty("gridVehicule_"+e.recid)&&w2ui["gridVehicule_"+e.recid].destroy(),$("#"+e.fbox_id).css({margin:"0px",padding:"0px",width:"100%"}).animate({height:"505px"},{duration:10}),$("#"+e.box_id).css({margin:"0px",padding:"0px",width:"100%"}).animate({height:"505px"},{duration:10,complete:function(){var t=w2ui.gridCereri.get(e.recid);app.Cereri.controller.listVehicule(e.box_id,{pid:e.recid,canadd:t.depusa<10,totalVehicule:t.countvehicule}),w2ui.layout.resize()}})},onRender:function(e){e.onComplete=function(){}}}},plati:function(){},vehicule:function(){var e=this;return{name:"gridVehicule_"+this.parentID,url:app.baseUrl+"/vehicule/getvehicule/"+e.parentID,method:"POST",recid:"id",show:{toolbar:!0,footer:!0,selectColumn:!0},columns:[{field:"id",caption:"ID",sortable:!0,
hidden:!0,size:"1px"},{field:"nr_registru",caption:"Nr. Omologare",sortable:!0,size:"25%"},{field:"vin",caption:"VIN",sortable:!0,size:"25%"},{field:"wvta",caption:"WVTA",sortable:!0,size:"25%",render:function(e){return e.wvta+"*"+e.extensie}},{field:"motiv_respingere",caption:"Stare In Clar",sortable:!0,size:"25%",hidden:!0,searchable:!1},{field:"stare",caption:"Status",sortable:!0,size:"25%",render:function(e){var t="default",n=e.motiv_respingere;switch(e.stare){case 0:t="label-default";break;case 1:t="label-primary";break;case 2:t="label-warning";break;case 3:case 8:t="label-danger";break;case 10:t="label-waiting";break;case 11:t="label-ready";break;case 12:t="label-warning";break;case 4:t="label-danger";break;case 15:t="label-success"}var i='<div style="width:200px;float:left">'+n+'</div><label style="font-size:9px" class="label '+t+'">&nbsp;&nbsp;&nbsp;</label>';return i}}],toolbar:{items:[{type:"button",caption:"Adauga",icon:"w2ui-icon-plus",id:"btnAddVehicul",disabled:!e.canadd,onClick:function(t){e.destroy(),app.Cereri.router.navigate("cereri/addVehicul/"+e.parentID,!0)}},{type:"button",id:"btnEditVehicul",caption:"Edit",icon:"w2ui-icon-pencil",disabled:!0,onClick:function(t){var n=w2ui["gridVehicule_"+e.parentID].getSelection();e.destroy(),app.Cereri.router.navigate("cereri/detaliiVehicul/"+n,!0)}},{type:"button",id:"btnDeleteVehicul",caption:"Sterge",icon:"w2ui-icon-cross",disabled:!0,onClick:function(t){w2ui["gridVehicule_"+e.parentID].delete()}},{type:"break"},{type:"button",id:"btnDetaliiVehicul",icon:"w2ui-icon-search",caption:"Detalii",disabled:!0,onClick:function(t){var n=w2ui["gridVehicule_"+e.parentID].getSelection();e.infoVehicul(n)}},{type:"button",id:"btnNewWin",icon:"w2ui-icon-list",caption:"Detaseaza",disabled:!1,onClick:function(t){e.win=$.jsPanel({id:"listvehicles"+e.parentID,headerTitle:"Lista vehicule comanda "+e.parentID,contentSize:"1000 800",content:'<div id="dettach'+e.parentID+'" ></div>',callback:function(t){var n=$("#dettach"+e.parentID);n.css("height","100%"),n.w2render("gridVehicule_"+e.parentID)},onresized:function(){w2ui["gridVehicule_"+e.parentID].resize()},onclosed:function(t){$(e.elid).w2render("gridVehicule_"+e.parentID)}})}}]},onDblClick:function(t){var n=this.get(t.recid).stare;n<10&&4!==n&&3!==n&&(e.destroy(),app.Cereri.router.navigate("cereri/detaliiVehicul/"+t.recid,!0))},multiSearch:!1,multiSelect:!0,searches:[{field:"vin",caption:"V.I.N. ",type:"text"},{field:"wvta",caption:"W.V.T.A.",type:"text"},{field:"nr_registru",caption:"Nr. Omologare",type:"text"},{field:"stare",caption:"Status",type:"list",options:{items:["In lucru","Remediabile","Transmise","Prelucrate","Invalide","Tiparite"]}}],parser:function(e){var t=$.parseJSON(e);return{status:"success",total:t.records,records:t.rows}},onDeleted:function(e){var t=JSON.parse(e.xhr.responseText);w2ui.gridCereri.get(t.id_comanda).depusa=t.status_comanda,w2ui.gridCereri.refreshCell(t.id_comanda,"stare_comanda")},onSelect:function(e){if(e.recid){var t=this.get(e.recid).stare;4!==t&&3!==t&&this.toolbar.enable("btnDetaliiVehicul"),t<10&&(this.toolbar.enable("btnDeleteVehicul"),4!==t&&3!==t&&this.toolbar.enable("btnEditVehicul"))}},onUnselect:function(){this.toolbar.disable("btnEditVehicul"),this.toolbar.disable("btnDeleteVehicul"),this.toolbar.disable("btnDetaliiVehicul")},fixedBody:!0,onSearch:function(e){for(var t in e.searchData){var n=e.searchData[t];if("stare"===n.field){switch(n.value){case"In lucru":n.value="(0,1,2)";break;case"Remediabile":n.value="(2)";break;case"Transmise":n.value="(10,11,12,15)";break;case"Prelucrate":n.value="11";break;case"Invalide":n.value="(4,12,8,3)";break;case"Tiparite":n.value="15"}n.operator="isin"}}}}}};t.exports=i},{}],32:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./views/index"),u=i(s),c=e("./views/plati"),d=i(c),p=e("./views/editor"),f=i(p),h=e("./views/vehicule"),v=i(h),b=e("./models/cerere"),m=i(b),y=e("./models/vehicul"),g=i(y),w=e("./collections/vehicule"),_=(i(w),e("./collections/nanvelope")),x=i(_),k=e("./views/arhivare"),O=i(k),C=e("./views/vehicul"),S=i(C),V=e("./views/spreadsheet"),P=i(V),j=e("./views/sfarsitSerie"),N=i(j),T=e("./views/atribute"),A=i(T),E=e("./views/anvelope"),D=i(E),I=e("./globals"),M=i(I),R=e("./../util"),z=i(R),U=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),l(t,[{key:"request",value:function(e){var t=e.split("/"),n=t[0],i=t.length>1?t.splice(1,1):null;this[n].apply(this,i),console.info("Route requested on Cereri controller")}},{key:"index",value:function(){var e=new u.default;app.getView().showChildView("container",e)}},{key:"plati",value:function(){var e=new d.default;app.getView().showChildView("container",e)}},{key:"editCerere",value:function(e){var t=new f.default({model:new m.default({id:e})});t.show()}},{key:"detaliiPlataCerere",value:function(e){z.default.printPDF(app.baseUrl+"/civfiles/getplatacomanda/?id="+e)}},{key:"arhivareComanda",value:function(e){$.get(app.baseUrl+"/vehicule/getvehiculecomanda/"+e,function(e){var t=new O.default({data:e});t.show()})}},{key:"listVehicule",value:function(e,t){var n="#"+e,i=new v.default({element:n,parentID:t.pid,canadd:t.canadd,totalItems:t.totalVehicule});i.render()}},{key:"spreadsheetVehicule",value:function(e){app.getView().showChildView("container",new P.default({id_comanda:e}))}},{key:"detaliiVehicul",value:function(e){var t=new g.default({id:e});t.fetch().then(function(){$.get(app.baseUrl+"/vehicule/getRelatedVehicles/"+t.get("id_comanda"),null,function(e){app.getView().showChildView("container",new S.default({model:t,relatedVehicles:e}))})})}},{key:"addVehicul",value:function(e){var t=new g.default({id_comanda:e});app.getView().showChildView("container",new S.default({model:t}))}},{key:"renderAtributes",value:function(e){var t=new A.default({collection:e.atributes});$(e.element).html(t.render().el)}},{key:"renderAnvelope",value:function(e){var t=new D.default({collection:e.anvelope}),n=t.render().el;$(e.element).html(n),app.Cereri.trigger("anvelopeView:setSelect")}},{key:"loadListeAnvelope",value:function(e,t){$.ajax({url:app.baseUrl+"/vehicule/GetListaAvelope",data:{id_tvv:e.get("id_tvv"),id_extensie:e.get("id_extensie")},success:function(e){var n=new x.default(e.anvelopef),i=new x.default(e.anvelopes);M.default.setAnvelopeFata(n),M.default.setAnvelopeSpate(i),t&&t()}})}},{key:"sfarsitSerie",value:function(){app.getView().showChildView("container",new N.default({message:"Hello new module!"}))}},{key:"transmitComanda",value:function(e,t){$.ajax({type:"POST",url:app.baseUrl+"appciv/comenzi/processcomanda/"+e,success:function(e){t()},error:function(e){t()}})}}]),t}(Mn.Object);n.default=U},{"./../util":85,"./collections/nanvelope":28,"./collections/vehicule":29,"./globals":33,"./models/cerere":36,"./models/vehicul":38,"./views/anvelope":53,"./views/arhivare":54,"./views/atribute":56,"./views/editor":57,"./views/index":58,"./views/plati":59,"./views/sfarsitSerie":60,"./views/spreadsheet":61,"./views/vehicul":62,"./views/vehicule":63}],33:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.anvelopefata=null,e.anvelopespate=null,e}return a(t,e),o(t,[{key:"getAnvelopeFata",value:function(){return this.anvelopefata}},{key:"getAnvelopeSpate",value:function(){return this.anvelopespate}},{key:"setAnvelopeFata",value:function(e){this.anvelopefata=e}},{key:"setAnvelopeSpate",value:function(e){this.anvelopespate=e}}]),t}(Mn.Object);n.default=new l},{}],34:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=e("./../globals"),a=i(r),o=window.Backbone.SModel.extend({urlRoot:function(){return app.baseUrl+"/vehicule/anvelope"},defaults:{},fields:function(){var e=this;return[{el:"#Anvelope_"+e.get("index")+"__id_roataf",name:"id_roataf",required:a.default.anvelopefata.models.length>0,type:"int"},{el:"#Anvelope_"+e.get("index")+"__id_roatas",name:"id_roatas",required:a.default.anvelopespate.models.length>0,type:"int"}]}});t.exports=o},{"./../globals":33}],35:[function(e,t,n){"use strict";var i=window.Backbone.SModel.extend({urlRoot:function(){return app.baseUrl+"/vehicule/atribute"},defaults:{},fields:function(){var e=this,t=[28];return[{name:"val",el:"#Atribute_"+e.get("index")+"__val",type:"text",required:t.indexOf(Number(e.get("id_nomenclator")))<0}]},initialize:function(){}});t.exports=i},{}],36:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(e){function t(e){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),o(t,[{key:"fields",value:function(){var e=this;return[{name:"id",el:"#id",type:"int"},{name:"data_comanda",el:"#data_comanda",type:"date"},{name:"data_inreg",el:"#data_inreg",type:"date",required:!0},{name:"id_beneficiar",el:"#id_beneficiar",type:"list",options:{url:app.baseUrl+"/civutils/GetBeneficiari",selected:e.get("id_beneficiar")},required:!0},{name:"nr_inreg_soc",el:"#nr_inreg_soc",type:"text",required:!0}]}},{key:"urlRoot",value:function(){return app.baseUrl+"/comenzi/edit"}},{key:"addRelated",value:function(e){this.attributes.Vehicule.add(e)}},{key:"removeRelated",value:function(e){this.attributes.Vehicule.remove(e)}}]),t}(Backbone.SModel);n.default=l},{}],37:[function(e,t,n){"use strict";var i=window.Backbone.SModel.extend({});t.exports=i},{}],38:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(e){function t(e){i(this,t);var n=$.extend(e,{defaults:{canBeDirty:!0}}),a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return a.urlRoot=app.baseUrl+"/vehicule/edit",a}return a(t,e),o(t,[{key:"fields",value:function(){var e=this,t=[];return e.get("culoare")&&$(e.get("culoare").split("-")).each(function(){t.push({id:this,text:this})}),[{name:"Atribute",type:"collection"},{name:"Anvelope",type:"collection"},{el:"#vin",name:"vin",type:"text",required:!0},{el:"#cnot",name:"cnot",type:"text"},{el:"#nr_registru",name:"nr_registru",type:"text"},{el:"#wvta",name:"id_wvta",type:"list",required:!0,options:{url:app.baseUrl+"/civutils/getWVTA",cascadeTo:["#id_extensie","#tip","#varianta","#versiune"],selected:e.get("id_wvta"),minLength:0}},{el:"#id_extensie",name:"id_extensie",type:"list",required:!0,options:{minLength:0,url:app.baseUrl+"/civutils/getExtensiiWVTA",cascadeData:function(){return{id_wvta:e.get("id_wvta")||"0"}},selected:e.get("id_extensie"),cascadeTo:["#tip","#varianta","#versiune"]}},{el:"#tip",name:"tip",type:"list",required:!0,options:{minLength:0,url:app.baseUrl+"/civutils/getTipuri",cascadeData:function(){return{id_extensie:e.get("id_extensie")||"0"}},selected:e.get("tip"),cascadeTo:["#varianta","#versiune"]}},{el:"#varianta",name:"varianta",type:"list",required:!0,options:{minLength:0,url:app.baseUrl+"/civutils/getVariante",cascadeData:function(){return{id_wvta:e.get("id_wvta")||"0",tip:e.get("tip")}},cascadeTo:["#versiune"]},selected:e.get("varianta")},{el:"#versiune",name:"versiune",type:"list",required:!0,options:{minLength:0,url:app.baseUrl+"/civutils/getVersiuni",cascadeData:function(){return{id_wvta:e.get("id_wvta")||"0",tip:e.get("tip"),varianta:e.get("varianta")}}},selected:{id:e.get("id_tvv"),text:e.get("versiune")},change:function(){var t=$("#versiune").data("selected");e.set("versiune",t.text),e.set("id_tvv",t.id)}},{el:"#an_fabr",name:"an_fabr",type:"int",required:!0,options:{min:1960,max:Number((new Date).getFullYear())+1}},{el:"#motor",name:"motor",type:"list",required:e.get("categ_euro")&&"O"!==e.get("categ_euro").substr(0,1)&&"R"!==e.get("categ_euro").substr(0,1),options:{url:app.baseUrl+"/vehicule/getMotoare",cascadeData:function(){return{id_tvv:e.get("id_tvv"),id_extensie:e.get("id_extensie")}},minLength:0},selected:e.get("motor")},{el:"#culoare",name:"culoare",type:"enum",required:!0,options:{minLength:0,url:app.baseUrl+"/vehicule/getcolors",openOnFocus:!0,max:3},selected:t},{el:"#serie_motor",name:"serie_motor",type:"text",required:e.get("categ_euro")&&"O"!==e.get("categ_euro").substr(0,1)&&"R"!==e.get("categ_euro").substr(0,1)}]}}]),t}(Backbone.SModel);n.default=l},{}],39:[function(e,t,n){"use strict";t.exports=Backbone.Model.extend({idAttribute:"nr_identif"})},{}],40:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(e){i(this,t);var n=$.extend(e,{appRoutes:{"cereri/*action":"request"}});return r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n))}return a(t,e),t}(Mn.AppRouter);n.default=o},{}],41:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){var a,o=null!=t?t:{},l=n.helperMissing,s="function",u=e.escapeExpression;return'    <div>\r\n    <div class="w2ui-field" name="rfcontainer">\r\n        <label>Fata(Anvelopa/Janta):</label>\r\n        <div>\r\n            <input type="text"  name="id_roataf" id="Anvelope_'+u((a=null!=(a=n.index||(null!=t?t.index:t))?a:l,typeof a===s?a.call(o,{name:"index",hash:{},data:r}):a))+'__id_roataf"/>\r\n        </div>\r\n    </div>\r\n    <div class="w2ui-field" name="rscontainer" >\r\n        <label>Spate(Anvelopa/Janta):</label>\r\n        <div>\r\n            <input type="text"  name="id_roatas" id="Anvelope_'+u((a=null!=(a=n.index||(null!=t?t.index:t))?a:l,typeof a===s?a.call(o,{name:"index",hash:{},data:r}):a))+'__id_roatas"/>\r\n        </div>\r\n    </div>\r\n    </div>\r\n    <div style="float: right; margin-top: -50px;">\r\n        <button class="w2ui-btn w2ui-btn-red btn-icon-only btnDelAnvelopa" ><i class="w2ui-icon-cross"></i></button>\r\n    </div>\r\n'},useData:!0})},{"hbsfy/runtime":22}],42:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="w2ui-page page-0 modalContent big-form" style="min-width: 1000px;">\r\n    <fieldset class="date-civ">\r\n        <legend>Date vehicul</legend>\r\n    \t<div class="w2ui-field" style="float:left">\r\n            <label>Categorie:</label>\r\n            <div><input type="text"  id="cat" readonly/></div>\r\n        </div>\r\n        <div class="w2ui-field" >\r\n            <label>Caroserie:</label>\r\n            <div><input type="text"  id="tip_caros" readonly size="60"/></div>\r\n        </div>\r\n        <div class="w2ui-field" style="float:left">\r\n            <label>Marca:</label>\r\n            <div><input type="text"  id="marca" readonly/></div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label>Tip/Varianta/Versiune:</label>\r\n            <div><input type="text"  id="tip_compus" readonly size="60"/></div>\r\n        </div>\r\n         <div class="w2ui-field" style="float:left">\r\n            <label>Nr. Registru:</label>\r\n            <div><input type="text"  id="nr_registr" readonly/></div>\r\n        </div>\r\n         <div class="w2ui-field">\r\n            <label>WVTA:</label>\r\n            <div><input type="text"  id="wvta" readonly size="60"/></div>\r\n        </div>\r\n        <fieldset class="tehnic-civ">\r\n        \t<legend>Mase</legend>\r\n        \t<table>\r\n        \t\t<tr>\r\n        \t\t\t<td>Proprie:</td><td><input readonly type="text" id="masa"></td>\r\n        \t\t\t<td>Utila:</td><td><input readonly type="text" id="masutil"></td>\r\n        \t\t\t<td>Carlig:</td><td><input readonly type="text" id="mascr"></td>\r\n        \t\t\t<td>Totala:</td><td><input readonly type="text" id="masa_total"></td>\r\n        \t\t\t<td>Axa fata:</td><td><input readonly type="text" id="masf"></td>\r\n        \t\t\t<td>Axa spate:</td><td><input readonly type="text" id="mass"></td>\r\n        \t\t</tr>\r\n        \t\t<tr>\r\n        \t\t\t<td colspan="3">Remorcabila cu franare:</td><td colspan="3"><input readonly type="text" id="masrecf"></td>\r\n        \t\t\t<td colspan="3">Remorcabila fara franare:</td><td colspan="3"><input readonly type="text" id="masrec"></td>\r\n        \t\t</tr>\r\n        \t</table>\r\n        </fieldset>\r\n        <fieldset class="tehnic-civ">\r\n        \t<legend>Locuri</legend>\r\n        \t<table>\r\n        \t\t<tr>\r\n        \t\t\t<td>Total:</td><td><input readonly type="text" id="locuri"></td>\r\n        \t\t\t<td>Fata:</td><td><input readonly type="text" id="focurif"></td>\r\n        \t\t\t<td>Scaune:</td><td><input readonly type="text" id="locurisc"></td>\r\n        \t\t\t<td>Picioare:</td><td><input readonly type="text" id="locuripi"></td>\r\n        \t\t</tr>\r\n        \t</table>\r\n        </fieldset>\r\n         <fieldset class="tehnic-civ">\r\n        \t<legend>Dimensiuni</legend>\r\n        \t<table>\r\n        \t\t<tr>\r\n        \t\t\t<td>Lungime:</td><td><input readonly type="text" id="lungmax"></td>\r\n        \t\t\t<td>Latime:</td><td><input readonly type="text" id="latmax"></td>\r\n        \t\t\t<td>Inaltime:</td><td><input readonly type="text" id="hmax"></td>\r\n        \t\t</tr>\r\n        \t</table>\r\n        </fieldset>\r\n        <fieldset class="tehnic-civ">\r\n        \t<legend>Motor</legend>\r\n        \t<table>\r\n        \t\t<tr>\r\n        \t\t\t<td>Cod:</td><td><input readonly type="text" id="cod" class="large"></td>\r\n        \t\t\t<td>Cilindree:</td><td><input readonly type="text" id="cilindree"></td>\r\n        \t\t\t<td>Putere(kW):</td><td><input readonly type="text" id="p_max_kw"></td>\r\n        \t\t\t<td>Turatie:</td><td><input readonly type="text" id="rot_p_max"></td>\r\n        \t\t</tr>\r\n        \t\t<tr>\r\n        \t\t\t<td>Combustibil:</td><td><input readonly type="text" id="combustib" class="large"></td>\r\n        \t\t\t<td>Vit. max:</td><td><input readonly type="text" id="vitezamax"></td>\r\n        \t\t\t<td>Zgomot mers:</td><td><input readonly type="text" id="sonext"></td>\r\n        \t\t\t<td>Zgomot stat.:</td><td><input readonly type="text" id="sonexts"></td>\r\n        \t\t</tr>\r\n        \t</table>\r\n        </fieldset>\r\n        <fieldset class="tehnic-civ">\r\n        \t<legend>Alte date</legend>\r\n        \t<table>\r\n        \t\t<tr>\r\n        \t\t\t<td>Rezervor:</td><td><input readonly type="text" id="rezervor"></td>\r\n        \t\t\t<td>Tractiune:</td><td><input readonly type="text" id="tractiune" class="large"</td>\r\n        \t\t</tr>\r\n        \t</table>\r\n        </fieldset>\r\n        <fieldset class="tehnic-civ">\r\n        \t<legend>Anvelope</legend>\r\n        \t<table>\r\n        \t\t<tr>\r\n        \t\t\t<td>Axa fata:</td><td><input readonly type="text" id="anvelopa" class="large"></td>\r\n        \t\t\t<td>Axa spate:</td><td><input readonly type="text" id="roatas" class="large"></td>\r\n        \t\t</tr>\r\n        \t\t<tr>\r\n        \t\t\t<td>Tolerate fata:</td><td><input readonly type="text" id="anvel_toler_fata" class="large"></td>\r\n        \t\t\t<td>Tolerate spate:</td><td><input readonly type="text" id="anvel_toler_spate" class="large"></td>\r\n        \t\t</tr>\r\n        \t</table>\r\n        </fieldset>\r\n    </fieldset>\r\n    <fieldset class="date-civ">\r\n    \t<legend>Date identificare</legend>\r\n    \t<table>\r\n    \t\t<tr>\r\n    \t\t\t<td>\r\n\t    \t\t\t<div class="w2ui-field">\r\n\t\t\t            <label>Nr. Identificare:</label>\r\n\t\t\t            <div><input type="text"  id="vin"/><input type="text"  id="nr_identif" style="display:none"/></div>\r\n\t         \t\t</div>\r\n         \t\t</td>\r\n         \t\t<td rowspan="3">\r\n    \t\t\t\t<div class="w2ui-field">\r\n\t\t\t            <label>Mentiuni:</label>\r\n\t\t\t            <div><textarea readonly id="mentiuni"></textarea></div>\r\n\t\t\t        </div>\r\n    \t\t\t</td>\r\n         \t</tr>\r\n         \t<tr>\r\n    \t\t\t<td>\r\n\t\t\t         <div class="w2ui-field">\r\n\t\t\t            <label>Serie motor:</label>\r\n\t\t\t            <div><input readonly type="text"  id="serie_mot" style="width:150px"/></div>\r\n\t\t\t        </div>\r\n    \t\t\t</td>\r\n    \t\t</tr>\r\n    \t\t<tr>\r\n    \t\t\t<td>\r\n\t\t\t        <div class="w2ui-field">\r\n\t\t\t            <label>Culoare:</label>\r\n\t\t\t            <div><input readonly type="text"  id="cul"/></div>\r\n\t\t\t        </div>\r\n    \t\t\t</td>\r\n    \t\t</tr>\r\n    \t</table>\r\n    </fieldset>\r\n    <fieldset class="date-civ">\r\n    \t<legend>Arhivare CIV si Folie</legend>\r\n    \t<div class="w2ui-field">\r\n            <label>Serie CIV:</label>\r\n            <div><input type="text"  id="serieciv" tabindex="1" autofocus /><input type="text"  id="serie_civ" style="display:none"/></div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label>Serie Folie:</label>\r\n            <div><input type="text"  id="folie_civ" tabindex="2" /></div>\r\n        </div>\r\n    </fieldset>\r\n</div>\r\n<div class="w2ui-buttons" id="buttons_container">\r\n    <div  id="operation_container">\r\n        <button title="Salvare" class="w2ui-btn w2ui-btn-green" id="btnSave"><i class="w2ui-icon-save" tabindex="3"></i> Salveaza\r\n        </button>\r\n        <button title="Inchide" class="w2ui-btn w2ui-btn-default" id="btnClose"><i class="w2ui-icon-cross"></i> Inchide\r\n        </button>\r\n    </div>\r\n    <div  id="supervize_container" style="margin-top:5px;">\r\n        <button id="btnFirst">|<</button>\r\n        <button id="btnPrev"><</button>\r\n        <label id="currentIndex" style="width:50px"></label> din <label id="totalciv" style="width:50px"></label>\r\n        <button id="btnNext">></button>\r\n        <button id="btnLast">>|</button>\r\n    </div>\r\n</div>\r\n'},useData:!0})},{"hbsfy/runtime":22}],43:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){var a;return'<label name="label"></label>\r\n<div><input type="text" id="Atribute_'+e.escapeExpression((a=null!=(a=n.index||(null!=t?t.index:t))?a:n.helperMissing,"function"==typeof a?a.call(null!=t?t:{},{name:"index",hash:{},data:r}):a))+'__val"  name="val"  /></div>\r\n'},useData:!0})},{"hbsfy/runtime":22}],44:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){var a;return'<label name="label"></label>\r\n<div>\r\n\t<input type="text" name="val" class="input-sm"  id="Atribute_'+e.escapeExpression((a=null!=(a=n.index||(null!=t?t.index:t))?a:n.helperMissing,"function"==typeof a?a.call(null!=t?t:{},{name:"index",hash:{},data:r}):a))+'__val" />\r\n</div>'},useData:!0})},{"hbsfy/runtime":22}],45:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){var a;return'<label  name="label"></label>\r\n<div><input type="number" name="val" class="input-sm"  id="Atribute_'+e.escapeExpression((a=null!=(a=n.index||(null!=t?t.index:t))?a:n.helperMissing,"function"==typeof a?a.call(null!=t?t:{},{name:"index",hash:{},data:r}):a))+'__val" />\r\n\r\n\r\n<label class="lbl-desc-start" name="min"></label><label class="lbl-desc-end" name="max"></label>\r\n\r\n</div>'},useData:!0})},{"hbsfy/runtime":22}],46:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return' <div class="w2ui-page page-0" >\r\n    <div id="daterar_container">\r\n        <div class="w2ui-field">\r\n            <label>Nr. inregistrare RAR</label>\r\n            <div>\r\n                <input type="text" id="id" name="id" readonly size="30" />\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label>Data Inregistrare</label>\r\n            <div>\r\n                <input type="text" id="data_comanda" name="data_comanda" class="datepicker" readonly size="30"/>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div id="date_beneficiar_container">\r\n        <div class="w2ui-field " id="addBeneficiar">\r\n            <label>Beneficiar</label>\r\n            <div>\r\n                <input type="text" id="id_beneficiar" name="id_beneficiar" size="30" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n        <div class="w2ui-field">\r\n            <label>Nr. registru client</label>\r\n            <div>\r\n                <input type="text" id="nr_inreg_soc" name="nr_inreg_soc" size="30" placeholder="Cerere client..." required />\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label>Data registru client</label>\r\n            <div>\r\n                <input type="text" id="data_inreg" name="data_inreg" size="30" class="datepicker" placeholder="Data Cerere client..." />\r\n            </div>\r\n        </div>\r\n\r\n\r\n    </div>\r\n    <div class="w2ui-buttons">\r\n        <button title="Renunta"  name="cancel" id="btnCancelEdit" class="w2ui-btn w2ui-btn-red" >\r\n            <i class="w2ui-icon-cross"></i> Inchide\r\n        </button>\r\n        <button title="Salvare" id="btnSaveComanda" class="w2ui-btn w2ui-btn-blue" name="save">\r\n            <i class="w2ui-icon-save"></i> Salveaza\r\n        </button>\r\n    </div>'},useData:!0})},{"hbsfy/runtime":22}],47:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div id="grid" class="fullscreen"></div>\r\n<input style="display:none;" id="dialog" type="file" nwsaveas="plati.xls" />\r\n'},useData:!0})},{"hbsfy/runtime":22}],48:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div style="overflow:auto;width:100%;height:100%;padding: 20px">\r\n<p>\r\n\t<div style="display:inline-block"><label >WVTA:</label><div><input type="text" id="wvta" /></div></div>\r\n\t<div style="display:inline-block"><label >Extensie:</label><div><input type="text" id="extensie" /></div></div>\r\n\t<div style="display:inline-block"><label >Tip:</label><div><input type="text" id="tip" /></div></div>\r\n\t<div style="display:inline-block"><label >Varianta:</label><div><input type="text" id="varianta" /></div></div>\r\n\t<div style="display:inline-block"><label >Versiune:</label><div><input type="text" id="versiune" /></div></div>\r\n</p>\r\n\r\n<div id="vehicles" style="height:500px"></div>\r\n<div id="validationSummary" style="color:red"></div>\r\n<p>\r\n\t<button name="back" id="back" class="w2ui-btn"><i class="w2ui-icon-signout"></i> Inapoi la lista</button>\r\n</p>\r\n</div>\r\n'},useData:!0})},{"hbsfy/runtime":22}],49:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){var a;return'<label name="label"></label>\r\n<div>\r\n    <input type="text" id="Atribute_'+e.escapeExpression((a=null!=(a=n.index||(null!=t?t.index:t))?a:n.helperMissing,"function"==typeof a?a.call(null!=t?t:{},{name:"index",hash:{},data:r}):a))+'__val" name="val" style="min-width:250px" />\r\n</div>'},useData:!0})},{"hbsfy/runtime":22}],50:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div id="vehiculTemplate" class="form-model" style="width:100%;margin:0 auto;height:100%">\r\n    <input type=\'hidden\' name="id" id="id" data-bind="value:id" />\r\n    <input type="hidden" name="id_comanda" data-bind="value:id_comanda" />\r\n        <div style="height:100%;min-width: 500px" id="date_principale">\r\n            <div class="w2ui-field">\r\n                <label>VIN:</label>\r\n                <div><input type=\'text\'  id="vin" maxlength="17" style="text-transform: uppercase"/></div>\r\n            </div>\r\n           <!--  <div class="w2ui-field">\r\n                <label >Nr. registru:</label>\r\n                <div><input type="text" id="cnot" /></div>\r\n            </div> -->\r\n            <div class="w2ui-field">\r\n                <label>Nr. omologare RAR:</label>\r\n                <div><input type="text"  id="nr_registru" disabled/></div>\r\n            </div>\r\n\r\n            <div class="w2ui-field">\r\n                <label >WVTA:</label>\r\n                <div><input type="text"  id="wvta" /></div>\r\n\r\n            </div>\r\n            <div class="w2ui-field">\r\n                <label >Extensie WVTA:</label>\r\n                <div><input type="text"  id="id_extensie" /></div>\r\n            </div>\r\n            <div class="w2ui-field">\r\n                <label >Tip:</label>\r\n                <div><input type="text"  id="tip" /></div>\r\n            </div><div class="w2ui-field">\r\n                <label >Varianta:</label>\r\n                <div><input type="text"  id="varianta" /></div>\r\n            </div><div class="w2ui-field">\r\n                <label >Versiune:</label>\r\n                <div><input type="text"  id="versiune" /></div>\r\n            </div>\r\n            <div class="w2ui-field">\r\n                <label >An fabricatie:</label>\r\n                <div><input type="text"  class="input-sm" id="an_fabr" maxlength="4" /></div>\r\n\r\n            </div>\r\n            <div class="w2ui-field" style="margin-bottom:5px">\r\n                <label >Culoare:</label>\r\n                <div><input type="text"  id="culoare" class="select-control" /></div>\r\n            </div>\r\n            <div id="engine_container">\r\n                <div class="w2ui-field engine">\r\n                    <label >Cod motor / P(kW):</label>\r\n                    <div><input type="text"  id="motor" /></div>\r\n\r\n                </div>\r\n                <div class="w2ui-field engine">\r\n                    <label>Serie motor:</label>\r\n                    <div><input type="text"  id="serie_motor" /></div>\r\n\r\n                </div>\r\n            </div>\r\n        <!--</form>-->\r\n            <label>Mentiuni suplimentare(se completeaza automat):</label>\r\n            <div class="mentiuni w2ui-field">\r\n                <input  type="text" id="ment1" maxlength="50" readonly="readonly" />\r\n                <input type="text"  id="ment2" maxlength="50" readonly="readonly" />\r\n                <input type="text"  id="ment3" maxlength="50" readonly="readonly" />\r\n                <input type="text"  id="ment4" maxlength="50" readonly="readonly" />\r\n                <input type="text"  id="ment5" maxlength="50" readonly="readonly" />\r\n            </div>\r\n        </div>\r\n        <div  style="height:100%" id="date_tehnice">\r\n            <div id="date_tehnice_container">\r\n                <!-- <div class="accordion" id="date-accordion"></div> -->\r\n            </div>\r\n            <br>\r\n            <hr>\r\n            <div id="anvelope_container" style="margin-top: 35px">\r\n                <!-- <div class="accordion" id="anvelope-accordion"></div> -->\r\n            </div>\r\n        </div>\r\n    <!--end vehicule container-->\r\n        <div id="buttons_container">\r\n        <div class="col-md-9" id="operation_container">\r\n            <button title="Inchide" class="w2ui-btn w2ui-btn-default" id="btnBack"><i class="w2ui-icon-back"></i> Inchide\r\n            </button>\r\n            <button title="Salvare" class="w2ui-btn w2ui-btn-green" id="btnSaveVehicul"><i class="w2ui-icon-save"></i> Salveaza\r\n            </button>\r\n            <button disabled title="Copiere" class="w2ui-btn w2ui-btn-orange" id="btnCopyVehicul"><i class="w2ui-icon-paste" ></i> Copiaza\r\n            </button>\r\n            <button disabled title="Date complete" class="w2ui-btn w2ui-btn-blue" id="btnVehiculComplet"><i class="w2ui-icon-info"></i> Fisa\r\n            </button>\r\n            <button  title="Fereastra noua" class="w2ui-btn w2ui-btn-default" id="btnNewWindow"><i class="w2ui-icon-newwindow"></i> Fereastra noua\r\n            </button>\r\n        </div>\r\n        <div class="col-md-3" id="supervize_container">\r\n            <button id="btnFirst">|<</button>\r\n            <button id="btnPrev"><</button>\r\n            <input type="text" id="currentIndex" style="width:50px" readonly/>\r\n            <button id="btnNext">></button>\r\n            <button id="btnLast">>|</button>\r\n        </div>\r\n        </div>\r\n</div>\r\n';
},useData:!0})},{"hbsfy/runtime":22}],51:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div style="display:none">\r\n\t<input id="fileupload" type="file" class="file" name="files[]" multiple  accept=".xls">\r\n</div>\r\n<div id="grid" class="fullscreen"></div>\r\n'},useData:!0})},{"hbsfy/runtime":22}],52:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./../globals"),u=i(s),c=function(t){function n(t){r(this,n);var i=$.extend(t,{ui:{del:".btnDelAnvelopa"},events:{"click @ui.del":"deleteMe"},modelEvents:{}}),o=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i));return o.template=e("./../templates/anvelopaDropTemplate.html"),o._ctlFata=void 0,o._ctlSpate=void 0,o.bindings={'[name="rfcontainer"]':{attributes:[{name:"hidden",observe:"id_roataf",onGet:function(e){return 0==u.default.anvelopefata.models.length}}]},'[name="rscontainer"]':{attributes:[{name:"hidden",observe:"id_roatas",onGet:function(e){return 0==u.default.anvelopespate.models.length}}]}},o}return o(n,t),l(n,[{key:"triggerEvent",value:function(){app.Cereri.trigger("attachedProp:changed")}},{key:"resetError",value:function(e){$().w2tag()}},{key:"deleteMe",value:function(){console.log("init del anv"),app.Cereri.trigger("anvelopa:remove",this.model)}},{key:"initialize",value:function(){var e,t,n;u.default.anvelopefata&&this.model.get("id_roataf")&&2!==this.model.get("EntityState")&&(e=this.model.get("id_roataf"),t=u.default.anvelopefata.get(e).get("text"),this.model.set("anvelopaf",t)),u.default.anvelopespate&&(this.model.get("id_roatas")&&2!==this.model.get("EntityState")&&(n=u.default.anvelopespate.get(this.model.get("id_roatas")).get("text")),this.model.set("anvelopas",n))}},{key:"onRender",value:function(){this.setView(),this.listenTo(this.model,"change",function(){app.Cereri.trigger("attachedProp:changed")}),this.setSelect(),this.stickit()}},{key:"onDomRefresh",value:function(){this.setSelect()}},{key:"setSelect",value:function(){var e=this;this._ctlFata=this.$el.find('[name="id_roataf"]'),this._ctlSpate=this.$el.find('[name="id_roatas"]'),this._ctlFata.w2field("list",{minLength:0,items:u.default.anvelopefata.toJSON(),selected:e.model.get("id_roataf")}).on("change",function(t){var n=$(this).data("selected");e.model.get("id_roataf");e.model.set("anvelopaf",n.text),e.model.set("id_roataf",n.id),u.default.anvelopefata.trigger("update")}),this._ctlSpate.w2field("list",{minLength:0,items:u.default.anvelopespate.toJSON(),selected:e.model.get("id_roatas")}).on("change",function(t){var n=$(this).data("selected");e.model.get("id_roatas");e.model.set("anvelopas",n.text),e.model.set("id_roatas",n.id),u.default.anvelopespate.trigger("update")})}},{key:"setView",value:function(){0===this.model.get("nivel_echipare")&&this.$(".btnDelAnvelopa").remove()}},{key:"updateSourcesFata",value:function(){$(this._ctlFata).w2field().options.items=u.default.anvelopefata.toJSON()}},{key:"updateSourcesSpate",value:function(){$(this._ctlSpate).w2field().options.items=u.default.anvelopespate.toJSON()}},{key:"serializeData",value:function(){return{index:this.options.index}}}]),n}(Mn.View);n.default=c},{"./../globals":33,"./../templates/anvelopaDropTemplate.html":41}],53:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./anvelopa"),u=i(s),c=e("./../models/anvelopa"),d=i(c),p=e("./../globals"),f=i(p),h=function(e){function t(e){r(this,t);var n=$.extend(e,{className:"accordion",ui:{add:"#btnAddAnvelopa"},events:{"click @ui.add":"add"}}),i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return i.childView=u.default,i.listenTo(app.Cereri,"anvelopeView:setSelect",i.onShow),i}return o(t,e),l(t,[{key:"add",value:function(){var e=!0;for(var t in this.collection.models){var n=this.collection.models[t];(f.default.anvelopefata.length>0&&0===n.get("id_roataf")||f.default.anvelopespate.length>0&&0===n.get("id_roatas"))&&(e=!1)}this.collection.models.length<5&&e?(this.collection.add(new d.default({nivel_echipare:1,EntityState:0})),this.onShow()):(setTimeout(function(){$("#btnAddAnvelopa").w2tag()},3e3),$("#btnAddAnvelopa").w2tag("Nu sunt indeplinite conditiile de adaugare anvelope optionale!"))}},{key:"getTemplate",value:function(){var e="<div>";return e+='<div class="panel panel-primary">   <div class="w2ui-panel-title">Anvelope echipare standard</div>   <div class="panel-body" id="standard"></div></div><div class="panel panel-primary">   <div class="w2ui-panel-title">Anvelope echipare optionala</div>   <div class="panel-body" id="optionale">       <button class="w2ui-btn w2ui-btn-green btn-icon-only" id="btnAddAnvelopa"><i class="w2ui-icon-plus"></i></button>   </div></div>',e+="</div>"}},{key:"childViewOptions",value:function(e){return{index:this.collection.indexOf(e)}}},{key:"attachHtml",value:function(e,t,n){if(2!==t.model.get("EntityState")){t.model.set("index",n);var i=t.model.get("nivel_echipare"),r="";switch(i){case 0:r="standard";break;case 1:r="optionale"}e.$("#"+r).append(t.render().el)}}},{key:"onRender",value:function(){this.listenTo(app.Cereri,"anvelopa:remove",function(e){console.log("del set anv"),e.id?this.collection.trigger("remove",e):this.collection.remove(e)}),this.$el.find(".w2ui-panel-title").click(function(){return $(this).next().toggle("fast"),!1})}}]),t}(Mn.CompositeView);n.default=h},{"./../globals":33,"./../models/anvelopa":34,"./anvelopa":52}],54:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./../collections/vehiculeciv"),u=i(s),c=e("./../models/vehiculciv"),d=i(c),p=function(t){function n(t){r(this,n);var i=$.extend(t,{className:"fullscreen w2ui-reset w2ui-form",events:{"click #btnSave":"arhivare","click #btnClose":"closeView","click #btnNext":"next","click #btnPrev":"prev","click #btnLast":"last","click #btnFirst":"first","keyup #serieciv":"gotofolie","blur #serieciv":"gotofolie","keyup #vin":"lookup","blur #vin":"lookup","keyup #folie_civ":"gotosave"}}),o=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i));return o.bindings={},o.template=e("./../templates/arhivare.html"),o}return o(n,t),l(n,[{key:"show",value:function(){this.collection=new u.default(this.options.data),this.model=this.collection.models[0],this.open()}},{key:"open",value:function(){var e=this;this.win=$.jsPanel({id:"civReportArhivare",headerTitle:"Arhivare CIV",theme:"#1356A9",content:e.render().el,contentSize:"1000 800",callback:function(t){this.maximize(),$("#totalciv").text(e.collection.models.length),$("input[type=text][readonly]").css({"background-color":"yellow",color:"black"}),$("textarea[readonly]").css({"background-color":"yellow",color:"black"}),e.setupView.apply(e,[!0]),e.model.get("serie_civ")?$("#folie_civ").focus():$("#serieciv").focus()},onClosed:function(t){e.destroy()}})}},{key:"rebaseIndex",value:function(){this.collection.models.map(function(e,t){e.set("currentIndex",t+1)})}},{key:"setupView",value:function(e){e||this.unstickit();var t=this,n="";if(e&&t.rebaseIndex(),this.model){this.model.get("Modificari").map(function(e){n+=e.modificare+"\n"}),this.model.set("mentiuni",n);for(var i in this.model.attributes)t.bindings["#"+i]=i;$("#btnSave").attr("disabled",null)}else this.model=new d.default,$("#btnSave").attr("disabled",!0);$("#vin").val(this.model.get("nr_identif")),$("#serieciv").val(this.model.get("serie_civ")),this.stickit()}},{key:"next",value:function(e,t){if(t&&1===this.collection.models.length&&(this.collection.remove(this.model),this.model=null,$("#totalciv").text(this.collection.models.length),this.setupView(),w2alert("Nu mai sunt civ-uri de arhivat!")),this.model.get("currentIndex")<this.collection.models.length){if(t)var n=this.model;var i=this.model.get("currentIndex")+1;this.model=this.collection.find(function(e){return e.get("currentIndex")===i}),t&&(this.collection.remove(n),this.rebaseIndex(),this.model.get("serie_civ")?$("#folie_civ").focus():$("#serieciv").focus(),$("#totalciv").text(this.collection.models.length)),this.setupView()}}},{key:"prev",value:function(){if(this.model.get("currentIndex")>1){var e=this.model.get("currentIndex")-1;this.model=this.collection.find(function(t){return t.get("currentIndex")===e}),this.setupView()}}},{key:"last",value:function(){this.model=this.collection.models[this.collection.length-1],this.setupView()}},{key:"first",value:function(){this.model=this.collection.models[0],this.setupView()}},{key:"search",value:function(e,t){console.log("searching for "+t+" in "+e);var n=this.collection.find(function(n){return n.get(e)===t});n&&"serie_civ"===e||"nr_identif"===e?(this.model=n,this.setupView()):n||"serie_civ"!==e||this.model.set("serie_civ",t)}},{key:"lookup",value:function(e){(e.which&&13===e.which||!e.which)&&this.search("nr_identif",$("#vin").val().toUpperCase())}},{key:"arhivare",value:function(){var e=this;$.ajax({url:app.baseUrl+"appciv/vehicule/arhivareciv",type:"POST",contentType:"application/json",data:JSON.stringify(e.model.toJSON()),dataType:"json",success:function(t){e.next(null,!0)},error:function(e){console.log(e.responseJSON),w2alert(e.responseJSON.message)}})}},{key:"gotofolie",value:function(e){var t=$("#serieciv").val().toUpperCase();if(t&&(e.which&&13===e.which||!e.which)){$("#serieciv").val(t);var n=/([A-Z])(-)([0-9]{6})/,i=n.exec(t);if(i)this.search("serie_civ",t),$("#folie_civ").focus();else{var n=/([A-Z])([0-9]+)/,r=n.exec(t);if(r){var a=r[1]+"-"+r[2];$("#serieciv").val(a),this.search("serie_civ",a),$("#folie_civ").focus()}else alert("Seria CIV nu este introdusa corect!"),$("#serieciv").focus()}}}},{key:"gotosave",value:function(e){13===e.which&&$("#btnSave").focus()}},{key:"closeView",value:function(e){this.win.close()}}]),n}(Mn.View);n.default=p},{"./../collections/vehiculeciv":30,"./../models/vehiculciv":39,"./../templates/arhivare.html":42}],55:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(t){function n(e){i(this,n);var t=$.extend(e,{className:"w2ui-field"}),a=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return a.bindings={'[name="val"]':"val",'[name="label"]':"label",'[name="min"]':"min",'[name="max"]':"max"},a.source=a.model.get("source"),a}return a(n,t),o(n,[{key:"getTemplate",value:function(){switch(this.model.get("tip")){case"interval":return e("./../templates/atributItemTemplate.html");case"lista":return e("./../templates/atributDropTemplate.html");case"liber":return e("./../templates/atributFreeTemplate.html");case"tag":return e("./../templates/tag.html");default:return e("./../templates/atributFreeTemplate.html")}}},{key:"onRender",value:function(){"interval"===this.model.get("tip")||121===parseInt(this.model.get("id_nomenclator"))?this.setNumeric():("lista"===this.model.get("tip")||this.model.get("source"))&&this.setSelect(),this.stickit(),this.listenTo(this.model,"change",function(){app.Cereri.trigger("attachedProp:changed")})}},{key:"setSelect",value:function(){var e=this.model;if(""!==this.source&&void 0!==this.source&&null!==this.source){var t=this.source.split("|"),n=[],i=this.$el.find('[name="val"]');if($.each(t,function(e,t){n.push({id:t,text:t})}),"tag"===e.get("tip")){var r=e.get("val")?e.get("val").split("|"):[];i.w2field("enum",{items:n,openOnFocus:!0,selected:r}).on("change",function(){var t=$(this).data("selected"),n="";t.map(function(e){n+="|"+e.text}),e.set("val",n.substr(1,n.length))})}else i.w2field("list",{selected:{id:e.get("val"),text:e.get("val")},items:n})}}},{key:"setNumeric",value:function(){if(121===parseInt(this.model.get("id_nomenclator")))return void this.$el.find('[name="val"]').w2field("int");if(Number(this.model.get("min"))<=Number(this.model.get("max"))&&0!==Number(this.model.get("min"))){var e=0,t=this.model.get("max");switch(this.model.get("id_nomenclator")){case 18:e=0;break;default:e=this.model.get("min")}this.$el.find('[name="val"]').w2field("int",{min:e,max:t})}}},{key:"serializeData",value:function(){return{index:this.options.index}}}]),n}(Mn.View);n.default=l},{"./../templates/atributDropTemplate.html":43,"./../templates/atributFreeTemplate.html":44,"./../templates/atributItemTemplate.html":45,"./../templates/tag.html":49}],56:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./atribut"),u=i(s),c=function(e){function t(e){r(this,t);var n=$.extend(e,{className:"accordion"}),i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return i.childView=u.default,i}return o(t,e),l(t,[{key:"getTemplate",value:function(){var e=this.collection,t='<form role="form" class="form-inline">',n=_.groupBy(e.toJSON(),"grupa");return $.each(n,function(e,n){t+='<div id="panel-'+e+'" class="panel panel-primary hide"><div class="w2ui-panel-title">'+e.charAt(0).toUpperCase()+e.slice(1)+'</div><div class="panel-body" id="'+e+'"></div></div>'}),t+="</form>"}},{key:"childViewOptions",value:function(e){return{index:this.collection.indexOf(e)}}},{key:"attachHtml",value:function(e,t,n){var i,r,a;t.model.set("index",n),r=Number(t.model.get("min")),a=Number(t.model.get("max"));var o=t.model.get("source");if(i=t.model.get("val"),"interval"===t.model.get("tip")){if(!(r!==a&&0!==a||t.model.get("val")&&Number(t.model.get("val"))!==r))return void t.model.set("val",r)}else{if(!o&&28===t.model.get("id_nomenclator"))return;if(o){if(1===o.split("|").length)return void t.model.set("val",o);if(0===r&&0===a&&1===o.split("|").length)return void t.model.set("val",o)}else;}e.$("#"+t.model.get("grupa")).append(t.el).parent().removeClass("hide")}},{key:"onRender",value:function(){this.$el.find(".w2ui-panel-title").click(function(){return $(this).next().toggle("fast"),!1})}}]),t}(Mn.CompositeView);n.default=c},{"./atribut":55}],57:[function(require,module,exports){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),EditorView=function(_Mn$FormView){function EditorView(e){_classCallCheck(this,EditorView);var t=_possibleConstructorReturn(this,(EditorView.__proto__||Object.getPrototypeOf(EditorView)).call(this,e));t.template=require("./../templates/editor.html"),t.panelID="cerere"+t.model.id;var n="function"==typeof t.model.fields?t.model.fields():t.model.fields;for(var i in n){var r=n[i];t.bindings[r.el]=r.name}return t.bindings["#date_beneficiar_container"]={observe:"id",visible:function(){return app.User.isInRole([1,10])}},t}return _inherits(EditorView,_Mn$FormView),_createClass(EditorView,[{key:"show",value:function(){var e=this;this.model.id?this.model.fetch().then(function(){e.cachedModel=e.model.toJSON(),e.open()}):(e.isNew=!0,e.open())}},{key:"open",value:function(){var e=this;this.panel=$.jsPanel({headerTitle:"Cerere",id:e.panelID,theme:"#1356A9",resize:function(t,n){w2ui[e.panelID].resize()},contentSize:"440 255",headerControls:{smallify:"remove"},content:e.render().el,onclosed:e.destroyHandler.bind(e),callback:e.initHandler.bind(e)})}},{key:"destroyHandler",value:function(){app.trigger("app:cerere:edited"),w2ui[this.panelID].destroy(),this.destroy()}},{key:"initHandler",value:function(){var e=this;this.$el.w2form({name:e.panelID,fields:e.model.fields(),record:e.model.toJSON(),actions:{cancel:function(){this.clear(),e.panel.close()},save:e.saveHandler.bind(e)}}),this.stickit()}},{key:"saveHandler",value:function saveHandler(){var self=this,options;options={success:function(e){e.set("recid",e.id),self.isNew?app.trigger("app:grid:added",{grid:"gridCereri",model:e.toJSON()}):app.trigger("app:grid:edited",{grid:"gridCereri",model:e.toJSON()}),self.panel.close()},error:function error(model,response){var data,opt={text:"Eroare la salvare!",title:"Notificare",type:"error-template"};data=eval("("+response.responseText+")")}},0===w2ui[this.panelID].validate().length&&(self.model.save({},options),console.log(self.model.toJSON()))}}]),EditorView}(Mn.FormView);exports.default=EditorView},{"./../templates/editor.html":46}],58:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./../config"),u=i(s),c=e("./../../util"),d=i(c),p=function(e){function t(e){r(this,t);var n=$.extend(e,{className:"fullscreen"}),i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return i.template=_.template('<div style="display:none">\n\t\t\t\t\t\t\t\t\t\t<input id="fileupload" type="file" class="file" name="files[]" multiple  accept=".xml">\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id="grid" class="fullscreen"></div>'),i.setPermissions(),i}return o(t,e),l(t,[{key:"onAttach",value:function(){var e=this;this.$el.find("#grid").w2grid(u.default.index.apply(e)),this.disableGridButtons(),this.buildUpload()}},{key:"setPermissions",value:function(){this.allowDelete=app.User.isInRole([1]),this.allowPrint=app.User.isInRole([1,10])}},{key:"onBeforeDestroy",value:function(){w2ui.gridCereri.stateSave();for(var e in w2ui.gridCereri.records){var t=w2ui.gridCereri.records[e].recid;w2ui.hasOwnProperty("gridVehicule_"+t)&&w2ui["gridVehicule_"+t].destroy()}w2ui.gridCereri.destroy()}},{key:"getJurnal",value:function(e){d.default.printPDF(app.baseUrl+"/civfiles/GetJurnalComanda?id="+e)}},{key:"getRaport",value:function(e){d.default.printPDF(app.baseUrl+"/civfiles/GetRaportComanda?id="+e)}},{key:"arhivareCIV",value:function(e){app.Cereri.controller.arhivareComanda(e)}},{key:"printRaport",value:function(e){d.default.printPDF(app.baseUrl+"/civfiles/GetTiparCIVComanda?id="+e,function(t){t.on("closed",function(){w2confirm("Finalizati tiparirea comenzii?").yes(function(){$.post(app.baseUrl+"/vehicule/finalizeComanda/"+e),t.close(!0)}).no(function(){t.close(!0)})})})}},{key:"disableGridButtons",value:function(){w2ui.gridCereri.toolbar.disable("btnPlata"),w2ui.gridCereri.toolbar.disable("btnEdit"),w2ui.gridCereri.toolbar.disable("w2ui-delete"),w2ui.gridCereri.toolbar.disable("btnUpload"),w2ui.gridCereri.toolbar.disable("btnJurnal"),w2ui.gridCereri.toolbar.disable("btnRaport"),w2ui.gridCereri.toolbar.disable("btnPrintCIV"),w2ui.gridCereri.toolbar.disable("btnArhivareCIV"),w2ui.gridCereri.toolbar.disable("btnExcel"),w2ui.gridCereri.toolbar.disable("btnPostComanda")}},{key:"buildUpload",value:function(){var e=this;$("#fileupload").fileinput({uploadUrl:app.baseUrl+"/CIVFiles/uploadComanda",uploadClass:"btn btn-toolbar",uploadTitle:"Trimite fisier",uploadLabel:" Trimite",uploadIcon:'<i class="w2ui-icon-upload"></i>',showPreview:!1,showRemove:!1,showUpload:!1,showCaption:!1,progressClass:"hide",uploadExtraData:function(){var e=w2ui.gridCereri.getSelection()||null;if(e)return{id_comanda:e}},browseClass:"btn disabled btn-toolbar",browseTitle:"Alege fisiere",browseLabel:" Incarca vehicule",browseIcon:'<i class="w2ui-icon-folder"></i>',removeClass:"btn btn-toolbar",removeTitle:"Reset",removeLabel:" Reset",removeIcon:'<i class="w2ui-icon-cross"></i>'}),$("#fileupload").off("fileloaded").on("fileloaded",function(){w2ui.gridCereri.lock(),$("#fileupload").fileinput("upload")}).off("filebatchuploadsuccess").on("filebatchuploadsuccess",e.uploadComplete).off("filebatchuploaderror").on("filebatchuploaderror",e.uploadError)}},{key:"choosefile",value:function(){var e=this.$el.find("#fileupload");e.trigger("click")}},{key:"uploadComplete",value:function(e,t){var n=t.response;switch(w2ui.gridCereri.unlock(),n.code){case 1:d.default.showNotification({type:"success-template",text:n.message,title:"Notificare"});break;case 2:case 3:d.default.showNotification({type:"warning-template",text:n.message,title:"Notificare"});break;case 4:d.default.showNotification({type:"error-template",text:n.message,title:"Notificare"});break;case 6:d.default.showNotification({type:"error-template",text:n.message,title:"Notificare"});break;default:d.default.showNotification({type:"error-template",text:n.message,title:"Notificare"})}n.comanda&&(n.isNew?w2ui.gridCereri("add",n.comanda):(w2ui.gridCereri.set(n.comanda.id,n.comanda),w2ui.hasOwnProperty("gridVehicule_"+n.comanda.id)&&w2ui["gridVehicule_"+n.comanda.id].reload()))}},{key:"uploadError",value:function(e,t){$("#fileupload").fileinput("reset"),w2ui.gridCereri.unlock(),d.default.showNotification({type:"error-template",text:"Eroare la transmitere! Verificati fisierul!",title:"Notificare"})}},{key:"refreshGrid",value:function(e){e?w2alert(e):w2ui.gridCereri.reload()}}]),t}(Mn.View);n.default=p},{"./../../util":85,"./../config":31}],59:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./../../util"),u=i(s),c=function(t){function n(t){r(this,n);var i=$.extend(t,{className:"fullscreen"}),o=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i));return o.template=e("./../templates/plati.html"),o}return o(n,t),l(n,[{key:"onAttach",value:function(){var e=this,t=new Date;t.setDate(1),t.setHours(-1);var n=t.getDate().pad(),i=Number(t.getMonth()+1).pad(),r=t.getFullYear(),a=e.fdate="01."+i+"."+r,o=e.lDate=n+"."+i+"."+r;$("#grid").w2groupedgrid({name:"testgrid",url:app.baseUrl+"/comenzi/getSituatiePlati",recid:"id",summaryData:{gridSummary:[{field:"client",summary:"count"},{field:"suma",summary:"sum"},{field:"nrbuc",summary:"sum"}]},show:{footer:!0,toolbar:!0},toolbar:{items:[{type:"button",disabled:!1,caption:"Excel",icon:"w2ui-icon-file",id:"btnExcel",onClick:function(t){e.exportxls()}},{type:"break"},{type:"button",id:"btnRaport",caption:"Raport",icon:"w2ui-icon-print",disabled:!1,onClick:function(t){e.printRaport()}}]},columns:[{field:"client",caption:"Beneficiar",size:"350px",sortable:!0},{field:"id",caption:"Nr.Comanda",size:"150px",sortable:!0},{field:"nr_factura",caption:"Nr factura",size:"220px",sortable:!0},{field:"serie_factura",caption:"Serie factura",size:"120px",sortable:!0},{field:"data_factura",caption:"Data factura",size:"120px",sortable:!0},{field:"nrbuc",caption:"Numar bucati",size:"200px",sortable:!0},{field:"suma",caption:"Suma incasata",size:"30%",sortable:!0}],groupTemplates:[{field:"client",render:function(e){return"<b>"+e.client+"(Count: "+e.grpcnt+")</b>"}},{field:"serie_factura",render:function(e){return"<b>"+e.serie_factura+"(Count: "+e.grpcnt+")</b>"}}],summaryTemplates:[{field:"client",render:function(e){if(e)return"<b>Total: "+e.client+"</b>"}},{field:"suma",render:function(e){if(e)return"<b>Total: "+e.suma+" lei</b>"}},{field:"nrbuc",render:function(e){if(e)return"<b>Total: "+e.nrbuc+" CIV</b>"}}],searchData:[{field:"data_factura",type:"date",operator:"between",value:[a,o]}],hasInitialSearchData:!0,onAdd:function(){console.log(w2ui.grptestgrid.getSelection())},parser:function(e){var t=JSON.parse(e),n={status:"success",records:t.rows,summary:t.summary||[],total:t.records};return n},multiSearch:!0,searches:[{field:"client",caption:"Beneficiar",type:"text"},{field:"id",caption:"Nr.Comanda ",type:"int"},{field:"data_factura",caption:"Data factura",type:"date"}],onSelect:function(e){},records:[{recid:1,fname:"Joseph",lname:"Haydn",sdate:"1732-1809"},{recid:2,fname:"Ludwig Van",lname:"Beethoven",sdate:"1770-1827"},{recid:3,fname:"Wolfgang Amadeus",lname:"Mozart",sdate:"1756-1791"},{recid:4,fname:"Johann Sebastian",lname:"Bach",sdate:"1685-1750"},{recid:5,fname:"Richard",lname:"Wagner",sdate:"1685-1750"},{recid:6,fname:"Joseph",lname:"Haydn",sdate:"1732-1809"},{recid:7,fname:"Ludwig Van",lname:"Beethoven",sdate:"1770-1827",style:"background-color: #C2F5B4"},{recid:8,fname:"Wolfgang Amadeus",lname:"Mozart",sdate:"1756-1791"},{recid:9,fname:"Johann Sebastian",lname:"Bach",sdate:"1685-1750"},{recid:10,fname:"Richard",lname:"Wagner",sdate:"1685-1750",style:"color: red"},{recid:11,fname:"Joseph",lname:"Haydn",sdate:"1732-1809",style:"background-color: #FBFEC0"},{recid:12,fname:"Ludwig Van",lname:"Beethoven",sdate:"1770-1827"},{recid:13,fname:"Wolfgang Amadeus",lname:"Mozart",sdate:"1756-1791"},{recid:14,fname:"Johann Sebastian",lname:"Bach",sdate:"1685-1750"},{recid:15,fname:"Richard",lname:"Wagner",sdate:"1685-1750",style:"color: blue"},{recid:16,fname:"Joseph",lname:"Haydn",sdate:"1732-1809"},{recid:17,fname:"Ludwig Van",lname:"Beethoven",sdate:"1770-1827"},{recid:18,fname:"Wolfgang Amadeus",lname:"Mozart",sdate:"1756-1791"},{recid:19,fname:"Johann Sebastian",lname:"Bach",sdate:"1685-1750"},{recid:20,fname:"Richard",lname:"Wagner",sdate:"1685-1750"},{recid:21,fname:"Joseph",lname:"Haydn",sdate:"1732-1809"},{recid:22,fname:"Ludwig Van",lname:"Beethoven",sdate:"1770-1827"},{recid:23,fname:"Wolfgang Amadeus",lname:"Mozart",sdate:"1756-1791"},{recid:24,fname:"Johann Sebastian",lname:"Bach",sdate:"1685-1750"},{recid:25,fname:"Richard",lname:"Wagner",sdate:"1685-1750",style:"color: gray"},{recid:26,fname:"Joseph",lname:"Haydn",sdate:"1732-1809"},{recid:27,fname:"Ludwig Van",lname:"Beethoven",sdate:"1770-1827"},{recid:28,fname:"Wolfgang Amadeus",lname:"Mozart",sdate:"1756-1791"},{recid:29,fname:"Johann Sebastian",lname:"Bach",sdate:"1685-1750"},{recid:30,fname:"Richard",lname:"Wagner",sdate:"1685-1750"},{recid:31,fname:"Joseph",lname:"Haydn",sdate:"1732-1809"},{recid:32,fname:"Ludwig Van",lname:"Beethoven",sdate:"1770-1827",style:"background-color: #C2F5B4"},{recid:33,fname:"Wolfgang Amadeus",lname:"Mozart",sdate:"1756-1791"},{recid:34,fname:"Johann Sebastian",lname:"Bach",sdate:"1685-1750"},{recid:35,fname:"Richard",
lname:"Wagner",sdate:"1685-1750"},{recid:36,fname:"Joseph",lname:"Haydn",sdate:"1732-1809"}]})}},{key:"exportxls",value:function(){var e=w2ui.grptestgrid.mainGrid,t={cmd:"get-xls",limit:35e3,offset:0,search:e.searchData,searchLogic:"AND"};$("#dialog").trigger("click"),$("#dialog").off("change").on("change",function(n){u.default.downloadFile(e.url,"POST",t,$(this).val()),$(this).val("")})}},{key:"printRaport",value:function(e){var t=w2ui.grptestgrid.mainGrid,n={cmd:"get-xls",limit:35e3,offset:0,search:t.searchData,searchLogic:"AND"};u.default.printPDF(app.baseUrl+"/comenzi/GetRaportPlati?data="+JSON.stringify(n))}},{key:"onBeforeDestroy",value:function(){w2ui.grptestgrid.destroy()}}]),n}(Mn.View);n.default=c},{"./../../util":85,"./../templates/plati.html":47}],60:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./../../util"),u=i(s),c=function(t){function n(t){r(this,n);var i=$.extend(t,{className:"fullscreen"}),o=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i));return o.template=e("./../templates//vins.html"),o}return o(n,t),l(n,[{key:"onAttach",value:function(){this.buildUpload(),this.renderGrid()}},{key:"renderGrid",value:function(){var e=this;this.$el.find("#grid").w2grid({name:"gridVINS",url:app.baseUrl+"/vins/getVINS",method:"POST",recid:"id",fixedBody:!0,show:{toolbar:!0,footer:!0,toolbarAdd:!0,toolbarSave:!0,toolbarDelete:!0},onAdd:function(){w2ui.gridVINS.add({recid:0})},toolbar:{items:[{type:"button",id:"btnchooseFile",caption:"Alege fisier",icon:"w2ui-icon-upload",onClick:function(t){e.choosefile()}}]},multiSearch:!1,searches:[{field:"vin",caption:"Cod VIN ",type:"text"},{field:"tip",caption:"Tip",type:"text"},{field:"varianta",caption:"Varianta",type:"text"},{field:"Versiune",caption:"Versiune",type:"text"},{field:"wvta",caption:"WVTA",type:"text"},{field:"act_normativ",caption:"Act normativ",type:"text"}],columns:[{field:"vin",caption:"VIN",size:"30%",sortable:!0,editable:{type:"text",required:!0}},{field:"tip",caption:"Tip",size:"120px",sortable:!0,editable:{type:"text",required:!0}},{field:"varianta",caption:"Varianta",size:"100px",sortable:!0,editable:{type:"text",required:!0}},{field:"versiune",caption:"Versiune",size:"120px",sortable:!0,editable:{type:"text",required:!0}},{field:"wvta",caption:"WVTA",size:"150px",sortable:!0,editable:{type:"text",required:!0}},{field:"extensie",caption:"Extensie",size:"30%",sortable:!0,editable:{type:"text",required:!0}},{field:"act_normativ",caption:"Act normativ",size:"30%",sortable:!0,editable:{type:"text",required:!0}}],parser:function(e){var t=$.parseJSON(e);return{status:"success",total:t.records,records:t.rows}}}),w2ui.gridVINS.stateRestore()}},{key:"onBeforeDestroy",value:function(){w2ui.gridVINS.stateSave(),w2ui.gridVINS.destroy()}},{key:"choosefile",value:function(){var e=this.$el.find("#fileupload");e.trigger("click")}},{key:"setUploadEvent",value:function(){this.$el.find("#fileupload")}},{key:"buildUpload",value:function(){var e=this;$("#fileupload").fileinput({uploadUrl:app.baseUrl+"/files/uploadxls",uploadClass:"btn btn-toolbar",uploadTitle:"Trimite fisier",uploadLabel:" Trimite",uploadIcon:'<i class="w2ui-icon-upload"></i>',showPreview:!1,showRemove:!1,showUpload:!1,showCaption:!1,progressClass:"hide",uploadExtraData:function(){var e=w2ui.gridVINS.getSelection()||null;if(e)return{id_comanda:e}},browseClass:"btn disabled btn-toolbar",browseTitle:"Alege fisiere",browseLabel:" Incarca vehicule",browseIcon:'<i class="w2ui-icon-folder"></i>',removeClass:"btn btn-toolbar",removeTitle:"Reset",removeLabel:" Reset",removeIcon:'<i class="w2ui-icon-cross"></i>'}),$("#fileupload").off("fileloaded").on("fileloaded",function(){w2ui.gridVINS.lock(),$("#fileupload").fileinput("upload")}).off("filebatchuploadsuccess").on("filebatchuploadsuccess",e.uploadComplete).off("filebatchuploaderror").on("filebatchuploaderror",e.uploadError)}},{key:"uploadComplete",value:function(e,t){var n=t.response.response;switch(w2ui.gridVINS.unlock(),n.code){case 1:u.default.showNotification({type:"success-template",text:n.message,title:"Notificare"});break;case 2:case 3:u.default.showNotification({type:"warning-template",text:n.message,title:"Notificare"});break;case 4:u.default.showNotification({type:"error-template",text:n.message,title:"Notificare"});break;case 6:case 0:case 9:case 8:u.default.showNotification({type:"error-template",text:n.message,title:"Notificare"});break;default:u.default.showNotification({type:"error-template",text:n.message,title:"Notificare"})}w2ui.gridVINS.reload()}},{key:"uploadError",value:function(e,t){$("#fileupload").fileinput("reset"),w2ui.gridVINS.unlock(),ipc.send("app:notification:show",{type:"error-template",text:"Eroare la transmitere! Verificati fisierul!",title:"Notificare"})}}]),n}(Mn.View);n.default=c},{"./../../util":85,"./../templates//vins.html":51}],61:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./../../util"),u=i(s),c=function(t){function n(t){r(this,n);var i=$.extend(t,{className:"fullscreen",events:{"click #load":"loadData","click #save":"saveData","click #copy":"duplicateRows","click #back":"back"}}),o=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i));return o.template=e("./../templates/spreadsheet.html"),o.isValid=!0,o}return o(n,t),l(n,[{key:"back",value:function(){window.location.hash="#/cereri/index"}},{key:"duplicateRows",value:function(){var e=w2ui.spreadsheetVehicule.records,t=$.extend({},e[0]);delete t.vin,delete t.recid,delete t.culoare,delete t.an,delete t.serie;for(var n=1;n<e.length;n++)w2ui.spreadsheetVehicule.set(n,t);w2ui.spreadsheetVehicule.save()}},{key:"resetGrid",value:function(){w2ui.spreadsheetVehicule.columns=[],w2ui.spreadsheetVehicule.records=[],w2ui.spreadsheetVehicule.refresh()}},{key:"onAttach",value:function(){var e=this;this.buildLoad(),$().w2grid({name:"spreadsheetVehicule",show:{toolbar:!0,toolbarAdd:!0,toolbarDelete:!0,footer:!0,lineNumbers:!0},selectType:"cell",records:[],columns:[],fixedBody:!1,toolbar:{items:[{type:"button",id:"save",text:"Salveaza",icon:"w2ui-icon-check",onClick:e.saveData.bind(e)},{type:"button",id:"load",text:"Incarca",icon:"w2ui-icon-upload",onClick:e.loadData.bind(e)},{type:"button",id:"multiply",text:"Multiplica randuri",icon:"w2ui-icon-list",onClick:e.duplicateRows.bind(e)},{type:"button",id:"reset",text:"Reset",icon:"w2ui-icon-trash",onClick:e.resetGrid.bind(e)}]},onPaste:function(e){for(var t=e.text.split("\n").length,n=1;n<t;n++)this.add({recid:n});e.onComplete=this.save},onAdd:function(){this.add({recid:this.records.length+1})},onChange:function(e){e.onComplete=function(){this.save()}},onDelete:function(e){var t=this.getSelection();e.onComplete=function(){for(var e,n=0;n<t.length;n++)t[n].recid!==e&&(e=t[n].recid,this.remove(e));for(var n=0;n<this.records.length;n++)this.records[n].recid=n}}}),$("#vehicles").w2render("spreadsheetVehicule")}},{key:"loadData",value:function(e){$.ajax({url:app.baseUrl+"/civutils/getdateciv",type:"POST",data:{id_tvv:$("#versiune").data("selected").id,id_extensie:$("#extensie").data("selected").id},success:function(e){for(var t=e.data,n=[],i=[],r=0;r<t.colHeaders.length;r++){var a,o=t.columns[r].editor;if(o){if(a="culoare"===t.columns[r].data?{type:"combo"}:{type:"select"===o?"select":"text"},t.columns[r].selectOptions){a.items=[];for(var l=0;l<t.columns[r].selectOptions.length;l++)a.items.push({id:t.columns[r].selectOptions[l],text:t.columns[r].selectOptions[l]})}}else t.columns[r].type?(a={type:"float"},t.columns[r].interval&&(a.min=Number(t.columns[r].interval[0]),a.max=Number(t.columns[r].interval[1]))):a={type:"text"};n.push({field:t.columns[r].data,caption:t.colHeaders[r],sortable:!0,size:t.columns[r].data.search("anv")!==-1||t.columns[r].data.search("vin")!==-1?"230px":t.columns[r].data.search("culoare")!==-1?"150px":"100px",editable:a})}t.data.recid=0,i.push(t.data),w2ui.hasOwnProperty("spreadsheetVehicule")&&(w2ui.spreadsheetVehicule.columns=n,w2ui.spreadsheetVehicule.records=i,w2ui.spreadsheetVehicule.refresh())}})}},{key:"buildLoad",value:function(){var e=this;$("#wvta").w2field("list",{url:app.baseUrl+"/civutils/getWVTA",minLength:0,cascadeTo:["#extensie"]}),$("#wvta").w2field().setItemById(),$("#wvta").on("change",function(){$("#wvta").w2field().cascadeTo(["#extensie"])}),$("#extensie").w2field("list",{cascadeTo:["#tip"],url:app.baseUrl+"/civutils/getExtensiiWVTA",minLength:0,cascadeData:function(){return{id_wvta:$("#wvta").data("selected").id}}}),$("#extensie").w2field().setItemById(),$("#extensie").on("change",function(){$("#extensie").w2field().cascadeTo(["#tip"])}),$("#tip").w2field("list",{cascadeTo:["#varianta"],url:app.baseUrl+"/civutils/gettipuri",minLength:0,cascadeData:function(){return{id_extensie:$("#extensie").data("selected").id}}}),$("#tip").w2field().setItemById(),$("#tip").on("change",function(){$("#tip").w2field().cascadeTo(["#varianta"])}),$("#varianta").w2field("list",{cascadeTo:["#versiune"],url:app.baseUrl+"/civutils/getvariante",minLength:0,cascadeData:function(){return{id_wvta:$("#wvta").data("selected").id,tip:$("#tip").data("selected").id}}}),$("#varianta").w2field().setItemById(),$("#varianta").on("change",function(){$("#varianta").w2field().cascadeTo(["#versiune"])}),$("#versiune").w2field("list",{url:app.baseUrl+"/civutils/getversiuni",minLength:0,cascadeData:function(){return{id_wvta:$("#wvta").data("selected").id,varianta:$("#varianta").data("selected").id,tip:$("#tip").data("selected").id}}}),$("#versiune").on("change",function(){e.loadData()})}},{key:"validator",value:function(e,t){t(!0)}},{key:"beforeValidate",value:function(e,t,n,i){var r=this.validators[n],a=this.hot.propToCol(n),o=this.hot.countRows();t<o-1&&(r?e&&""!=e&&e>=Number(r[0])&&e<=Number(r[1])?($(this.hot.getCell(t,a)).w2tag(),this.isValid=!0):(e&&""!==e?$(this.hot.getCell(t,a)).attr("id","field"+t+"-"+a).w2tag("Valoare intre "+r[0]+" si "+r[1]):$(this.hot.getCell(t,a)).attr("id","field"+t+"-"+a).w2tag("Valoare obligatorie!"),this.isValid=!1):"vin"===n?this.validateVin(e)?($(this.hot.getCell(t,a)).w2tag(),this.isValid=!0):($(this.hot.getCell(t,a)).attr("id","field"+t+"-"+a).w2tag("Valoare invalida!"),this.isValid=!1):"an"===n?e<1960||e>(new Date).getFullYear()?($(this.hot.getCell(t,a)).attr("id","field"+t+"-"+a).w2tag("Valoare invalida!"),this.isValid=!1):($(this.hot.getCell(t,a)).w2tag(),this.isValid=!0):e&&""!==e?($(this.hot.getCell(t,a)).w2tag(),this.isValid=!0):($(this.hot.getCell(t,a)).attr("id","field"+t+"-"+a).w2tag("Valoare obligatorie!"),this.isValid=!1))}},{key:"validateRow",value:function(e,t){for(var n=!0,i=w2ui.spreadsheetVehicule,r=i.columns,a=0;a<r.length;a++){var o=r[a];e[o.field]&&""!==e[o.field]||($("#grid_spreadsheetVehicule_data_"+t+"_"+a).w2tag("Camp obligatoriu",{class:"w2ui-error"}),n=!1),"vin"===o.field&&(n=this.validateVin(e.vin),n||$("#grid_spreadsheetVehicule_data_"+t+"_"+a).w2tag("Valoare incorecta",{class:"w2ui-error"}))}return n}},{key:"saveData",value:function(){var e=!0,t=this,n=w2ui.spreadsheetVehicule.records;t.isValid=!0;for(var i=0;i<n.length;i++)t.validateRow(n[i],i)||(t.isValid=!1);if(!t.isValid){var r={text:"Vehiculele contin erori!",title:"Notificare",type:"error-template"};return void u.default.showNotification(r)}var a={id_tvv:$("#versiune").data("selected").id,id_extensie:$("#extensie").data("selected").id,id_comanda:t.options.id_comanda,data:w2ui.spreadsheetVehicule.records};e&&t.isValid&&($("#validationSummary").empty(),$.ajax({url:app.baseUrl+"/civutils/saveVehiculeExcel",type:"POST",contentType:"application/json",data:JSON.stringify(a),success:function(e){if(0===e.errors.length){$("#validationSummary").empty();var t={text:"Vehiculele au fost adaugate!",title:"Notificare",type:"success-template"};u.default.showNotification(t)}else{var t={text:"Vehiculele contin erori!",title:"Notificare",type:"error-template"};u.default.showNotification(t),e.errors.map(function(e){for(var t in e)$("#validationSummary").append("<span>"+t+": "+e[t]+"</span><br>")}),e.goodVehicles.map(function(e){for(var t=w2ui.spreadsheetVehicule.records,n=0;n<=t.length;n++)t[n].vin===e&&w2ui.spreadsheetVehicule.remove(t[n].recid)})}},error:function(e){e.map(function(t){$("#validationSummary").append("<span>"+t+": "+e[t]+"</span><br>")})}}))}},{key:"validateVin",value:function(e,t){var n=e,i=/^[A-HJ-NP-Z0-9]+$/;if(void 0!==n&&n.length>0)return!(!i.test(n)||17!==n.length)}},{key:"onBeforeDetach",value:function(){w2ui.spreadsheetVehicule.destroy()}}]),n}(Mn.View);n.default=c},{"./../../util":85,"./../templates/spreadsheet.html":48}],62:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_util=require("./../../util"),_util2=_interopRequireDefault(_util),VehiculView=function(_Mn$FormView){function VehiculView(e){_classCallCheck(this,VehiculView);var t=$.extend(e,{className:"fullscreen",ui:{save:"#btnSaveVehicul",copy:"#btnCopyVehicul",info:"#btnVehiculComplet",back:"#btnBack",newwin:"#btnNewWindow",firstIndex:"#btnFirst",lastIndex:"#btnLast",nextIndex:"#btnNext",prevIndex:"#btnPrev"},events:{"click @ui.save":"save","click @ui.copy":"copy","click @ui.back":"back","click @ui.info":"info","click @ui.newwin":"newwin","click @ui.firstIndex":"gotofirst","click @ui.lastIndex":"gotolast","click @ui.nextIndex":"gotonext","click @ui.prevIndex":"gotoprev"}}),n=_possibleConstructorReturn(this,(VehiculView.__proto__||Object.getPrototypeOf(VehiculView)).call(this,t));return n.bindingOverrides={"#btnCopyVehicul":{attributes:[{name:"disabled",observe:"id",onGet:function(e){return!e}}]},"#btnVehiculComplet":{attributes:[{name:"disabled",observe:"id",onGet:function(e){return!e}}]},"#engine_container":{attributes:[{name:"hidden",observe:"categ_euro",onGet:function(e){return e?"O"===e.substr(0,1)||"R"===e.substr(0,1):e}}]},"#wvta":{observe:"id_wvta",onGet:function(e){return e},onSet:function(e){return this.resetVehicul(),e}},"#versiune":{observe:"versiune",onGet:function(e){return e},onSet:function(e){this.reloadDate();var t=$("#versiune").data("selected");return this.model.set("id_tvv",t.id),e}},"#culoare":{observe:"culoare",onGet:function(e){return e.split("-")},onSet:function(e){var t=[],n=$("#culoare").data("selected");for(var i in n){var r=n[i];t.push(r.id)}return t.join("-")}}},n.template=require("./../templates/vehicul.html"),n.setViewType(),n}return _inherits(VehiculView,_Mn$FormView),_createClass(VehiculView,[{key:"setViewType",value:function(){var e=this.model.get("isCopy");this.model.id||e||(this.isNew=!0)}},{key:"resetVehicul",value:function(){var e=this;if(console.log(e.model.get("id_tvv")),e.model.set("nr_registru",""),!e.iscopy){if(!e.isNew){e.model.get("Atribute").reset(),e.model.get("Anvelope").reset();try{Globals.anvelopefata.reset(),Globals.anvelopespate.reset()}catch(e){console.error(e)}}e.model.set("an_fabr","")}}},{key:"reloadDate",value:function(){var e=this,t={id_tvv:this.model.get("id_tvv"),id_extensie:this.model.get("id_extensie"),id:this.model.id&&0!==this.model.id?this.model.id:0};t.id_tvv&&t.id_extensie&&(e.iscopy||$.ajax({url:app.baseUrl+"/vehicule/getwvta",data:{id_tvv:e.model.get("id_tvv")},success:function(t){e.model.set("categ_euro",t.categ_euro),"O"!==t.categ_euro.substr(0,1)&&"R"!==t.categ_euro.substr(0,1)?($("#engine_container").show(),$("#motor").w2field().reinit(),e.model.set("serie_motor","").set("motor","")):(console.log("Remorca!!"),$("#engine_container").hide())}}),e.model.get("Atribute").reset(),$.ajax({url:app.baseUrl+"/vehicule/getatributevehicul",data:t,dataType:"json",contentType:"application/json",type:"GET",success:function(t){""!==t.error&&w2alert(t.error),e.model.get("Atribute").reset(t.atribute),e.isNew&&e.renderAtributes(),e.model.set("nr_registru",t.nr_registru),e.model.set("mentiuni",t.mentiuni),e.renderMentiuni()},error:function(e){console.error(e)}}),e.model.get("Anvelope").reset(),$.ajax({url:app.baseUrl+"/vehicule/getanvelopevehicul",data:t,dataType:"json",type:"GET",success:function(t){app.Cereri.controller.loadListeAnvelope(e.model,function(){e.model.get("Anvelope").reset(t),e.isNew?e.renderAnvelope():app.Cereri.trigger("anvelopeView:setSelect")})},error:function(e){console.error(e)}}))}},{key:"onAttach",value:function(){var e="border: 1px solid #dfdfdf; padding: 10px;";w2ui.hasOwnProperty("layoutVehicul")||$("#vehiculTemplate").w2layout({name:"layoutVehicul",panels:[{type:"left",size:"50%",style:e,title:"Date principale",resizable:!0,content:$("#date_principale").html()},{type:"main",size:"50%",title:"Date tehnice",style:e,content:$("#date_tehnice").html()},{type:"bottom",size:60,style:e,content:$("#buttons_container").html()}]}),this.setupView(),this.isNew||(this.renderAtributes(),app.Cereri.controller.loadListeAnvelope(this.model,this.renderAnvelope.bind(this)),this.renderMentiuni()),this.model.id&&(console.log(this.options),this.relatedVehicles=this.options.relatedVehicles,this.prepareFormNavigation())}},{key:"renderAtributes",value:function(){var e={element:"#date_tehnice_container",atributes:this.model.get("Atribute")};app.Cereri.controller.renderAtributes(e)}},{key:"renderAnvelope",value:function(){var e=this,t={element:"#anvelope_container",anvelope:e.model.get("Anvelope")};app.Cereri.controller.renderAnvelope(t)}},{key:"renderMentiuni",value:function(){if(this.model.get("mentiuni")){var e=this.model.get("mentiuni").split("\n");$(".mentiuni").find("input").val("");for(var t=0;t<e.length;t+=1)$("#ment"+(t+1)).val(e[t])}}},{key:"save",value:function save(){var self=this,options={success:function(e){var t={text:"Inregistrarea a fost salvata!",title:"Notificare",type:"success-template"};_util2.default.showNotification(t),self.model.get("isCopy")&&(app.router.navigate("appciv/detaliiVehicul/"+e.id),self.model.set("isCopy",!1)),self.enableCopy()},error:function error(model,response){if(401!==response.status){var opt={text:"Eroare la salvare!",title:"Notificare",type:"error-template"};_util2.default.showNotification(opt);var data=eval("("+response.responseText+")");w2utils.validateRaw(self.$el,data.data)}}};console.log(this.model),self.validatenewvin()&&w2utils.validate(self.model,self.$el)&&self.model.save({},options)}},{key:"prepareFormNavigation",value:function(){this.currentIndex=this.relatedVehicles.indexOf(this.model.id)+1,$("#currentIndex").val(this.currentIndex)}},{key:"gotofirst",value:function(){var e=this.relatedVehicles[0];app.Cereri.router.navigate("cereri/detaliiVehicul/"+e,!0)}},{key:"gotolast",value:function(){var e=this.relatedVehicles[this.relatedVehicles.length-1];app.Cereri.router.navigate("cereri/detaliiVehicul/"+e,!0)}},{key:"gotonext",value:function(){if(this.currentIndex<this.relatedVehicles.length){var e=this.relatedVehicles[this.currentIndex];app.Cereri.router.navigate("cereri/detaliiVehicul/"+e,!0)}}},{key:"gotoprev",value:function(){if(this.currentIndex>1){var e=this.relatedVehicles[this.currentIndex-2];app.Cereri.router.navigate("cereri/detaliiVehicul/"+e,!0)}}},{key:"validatenewvin",value:function(e){var t={},n=[];t.data=n;var i=this.model.get("vin");if(!i)return n.push({name:"vin",message:"Camp obligatoriu!"}),w2utils.validateRaw(this.$el,n),!1;var r=i.toUpperCase(),a=/^[A-HJ-NP-Z0-9]+$/;return void 0!==r&&r.length>0?a.test(r)&&17===r.length?(this.model.set("vin",r),!0):(n.push({name:"vin",message:"Valoare incorecta!"}),w2utils.validateRaw(this.$el,n),!1):(n.push({name:"vin",message:"Camp obligatoriu!"}),w2utils.validateRaw(this.$el,n),!1)}},{key:"copy",value:function(){$("#culoare").w2field().reinit(),this.model.set("EntityState",0).set("vin","").set("isCopy",!0).set("serie_motor","").set("culoare","").unset("id"),this.model.get("Atribute").each(function(e){e.set("EntityState",0).unset("id").unset("id_vehicul")}),this.model.get("Anvelope").each(function(e){e.set("EntityState",0).unset("id").unset("id_vehicul")}),this.isCopy=!0,this.disableCopy()}},{key:"info",value:function(){var e=this;_util2.default.printPDF(app.baseUrl+"/civfiles/GetVehiculComplet?id="+e.model.id)}},{key:"disableCopy",value:function(){$("#btnCopyVehicul").attr("disabled",!0),$("#btnVehiculComplet").attr("disabled",!0)}},{key:"enableCopy",value:function(){$("#btnCopyVehicul").attr("disabled",null),$("#btnVehiculComplet").attr("disabled",null)}},{key:"back",value:function(){var e=this;this.isDialog?_.find(w2ui.panels,function(t){return t.name==="editVeh"+e.cid}).destroy():app.Cereri.router.navigate("cereri/index",{trigger:!0})}},{key:"onBeforeDestroy",value:function(){w2ui.layoutVehicul.destroy()}}]),VehiculView}(Mn.FormView);exports.default=VehiculView},{"./../../util":85,"./../templates/vehicul.html":50}],63:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./../config"),u=i(s),c=e("./../../util"),d=i(c),p=function(e){function t(e){r(this,t);var n=$.extend(e||{},{}),i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return i.template=!1,i.parentID=e.parentID,i.elid=e.element,i.canadd=e.canadd,self.caption="Lista vehicule atasate comenzii nr."+self.parentID,i}return o(t,e),l(t,[{key:"onRender",value:function(){this.renderGrid()}},{key:"renderGrid",value:function(){var e=this;$(e.elid).w2grid(u.default.vehicule.apply(e))}},{key:"serializeData",value:function(){return{id_comanda:this.parentID}}},{key:"onBeforeDestroy",value:function(){w2ui["gridVehicule_"+this.parentID].destroy(),this.win&&(event={},this.win.close())}},{key:"infoVehicul",value:function(e){d.default.printPDF(app.baseUrl+"/civfiles/GetVehiculComplet?id="+e)}},{key:"refreshGrid",value:function(){w2ui["gridVehicule"+this.parentID].reload()}}]),t}(Mn.View);n.default=p},{"./../../util":85,"./../config":31}],64:[function(e,t,n){"use strict";t.exports={modules:{appciv:{active:!0,title:"Aplicatie CIV",name:"appciv",external_server:"https://prog.rarom.ro:446/civapi/",intranet_server:"http://10.1.0.32:8083/civapi/",dev_server:"http://10.2.2.10:8083/civapi/"}}}},{}],65:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=e("./main/views/root"),l=i(o),s=e("./main/views/login"),u=i(s),c=e("./main/views/home"),d=i(c),p=e("./main/views/profile"),f=i(p),h=e("./groupview"),v=i(h),b=(Backbone.Radio.channel("notify"),function(){function e(){r(this,e)}return a(e,[{key:"start",value:function(){var e=new l.default;app.showView(e)}},{key:"home",value:function(){app.getView().showChildView("container",new d.default)}},{key:"profile",value:function(){app.getView().showChildView("container",new f.default)}},{key:"settings",value:function(){}},{key:"info",value:function(){app.getView().showChildView("container",new v.default)}},{key:"login",value:function(){var e=new u.default;return e.show()}},{key:"logoff",value:function(e){app.User.logoff()}}]),e}());n.default=b},{"./groupview":66,"./main/views/home":75,"./main/views/login":76,"./main/views/profile":77,"./main/views/root":78}],66:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{className:"fullscreen"}));return n.template=!1,n}return a(t,e),o(t,[{key:"onAttach",value:function(){var e=this,t=new Date;t.setDate(1),t.setHours(-1);var n=t.getDate().pad(),i=Number(t.getMonth()+1).pad(),r=t.getFullYear();e.fdate="01."+i+"."+r,e.lDate=n+"."+i+"."+r;this.$el.w2groupedgrid({name:"testgrid",url:app.baseUrl+"/test/getPlati",recid:"id",summaryData:[{field:"client",summary:"count"},{field:"suma",summary:"sum"},{field:"nrbuc",summary:"sum"}],show:{toolbarAdd:!0,footer:!0,toolbar:!0},columns:[{field:"client",caption:"Beneficiar",size:"350px",sortable:!0},{field:"id",caption:"Nr.Comanda",size:"150px",sortable:!0},{field:"nr_factura",caption:"Nr factura",size:"220px",sortable:!0},{field:"serie_factura",caption:"Serie factura",size:"120px",sortable:!0},{field:"data_factura",caption:"Data factura",size:"120px",sortable:!0},{field:"nrbuc",caption:"Numar bucati",size:"200px",sortable:!0},{field:"suma",caption:"Suma incasata",size:"30%",sortable:!0}],groupTemplates:[{field:"client",render:function(e){return"<b>"+e.client+"(Count: "+e.grpcnt+")</b>"}},{field:"serie_factura",render:function(e){return"<b>"+e.serie_factura+"(Count: "+e.grpcnt+")</b>"}}],summaryTemplates:[{field:"client",render:function(e){return"<b>Total: "+e.client+"</b>"}},{field:"suma",render:function(e){return"<b>Total: "+e.suma+" lei</b>"}},{field:"nrbuc",render:function(e){return"<b>Total: "+e.nrbuc+" CIV</b>"}}],searchData:[],hasInitialSearchData:!0,onAdd:function(){console.log(w2ui.grptestgrid.getSelection())},parser:function(e){var t=JSON.parse(e),n={status:"success",records:t.rows,summary:t.summary||[],total:t.records};return n},onSelect:function(e){},records:[{recid:1,fname:"Joseph",lname:"Haydn",sdate:"1732-1809"},{recid:2,fname:"Ludwig Van",lname:"Beethoven",sdate:"1770-1827"},{recid:3,fname:"Wolfgang Amadeus",lname:"Mozart",sdate:"1756-1791"},{recid:4,fname:"Johann Sebastian",lname:"Bach",sdate:"1685-1750"},{recid:5,fname:"Richard",lname:"Wagner",sdate:"1685-1750"},{recid:6,fname:"Joseph",lname:"Haydn",sdate:"1732-1809"},{recid:7,fname:"Ludwig Van",lname:"Beethoven",sdate:"1770-1827",style:"background-color: #C2F5B4"},{recid:8,fname:"Wolfgang Amadeus",lname:"Mozart",sdate:"1756-1791"},{recid:9,fname:"Johann Sebastian",lname:"Bach",sdate:"1685-1750"},{recid:10,fname:"Richard",lname:"Wagner",sdate:"1685-1750",style:"color: red"},{recid:11,fname:"Joseph",lname:"Haydn",sdate:"1732-1809",style:"background-color: #FBFEC0"},{recid:12,fname:"Ludwig Van",lname:"Beethoven",sdate:"1770-1827"},{recid:13,fname:"Wolfgang Amadeus",lname:"Mozart",sdate:"1756-1791"},{recid:14,fname:"Johann Sebastian",lname:"Bach",sdate:"1685-1750"},{recid:15,fname:"Richard",lname:"Wagner",sdate:"1685-1750",style:"color: blue"},{recid:16,fname:"Joseph",lname:"Haydn",sdate:"1732-1809"},{recid:17,fname:"Ludwig Van",lname:"Beethoven",sdate:"1770-1827"},{recid:18,fname:"Wolfgang Amadeus",lname:"Mozart",sdate:"1756-1791"},{recid:19,fname:"Johann Sebastian",lname:"Bach",sdate:"1685-1750"},{recid:20,fname:"Richard",lname:"Wagner",sdate:"1685-1750"},{recid:21,fname:"Joseph",lname:"Haydn",sdate:"1732-1809"},{recid:22,fname:"Ludwig Van",lname:"Beethoven",sdate:"1770-1827"},{recid:23,fname:"Wolfgang Amadeus",lname:"Mozart",sdate:"1756-1791"},{recid:24,fname:"Johann Sebastian",lname:"Bach",sdate:"1685-1750"},{recid:25,fname:"Richard",lname:"Wagner",sdate:"1685-1750",style:"color: gray"},{recid:26,fname:"Joseph",lname:"Haydn",sdate:"1732-1809"},{recid:27,fname:"Ludwig Van",lname:"Beethoven",sdate:"1770-1827"},{recid:28,fname:"Wolfgang Amadeus",lname:"Mozart",sdate:"1756-1791"},{recid:29,fname:"Johann Sebastian",lname:"Bach",sdate:"1685-1750"},{recid:30,fname:"Richard",lname:"Wagner",sdate:"1685-1750"},{recid:31,fname:"Joseph",lname:"Haydn",sdate:"1732-1809"},{recid:32,fname:"Ludwig Van",lname:"Beethoven",sdate:"1770-1827",style:"background-color: #C2F5B4"},{recid:33,fname:"Wolfgang Amadeus",lname:"Mozart",sdate:"1756-1791"},{recid:34,fname:"Johann Sebastian",lname:"Bach",sdate:"1685-1750"},{recid:35,fname:"Richard",lname:"Wagner",sdate:"1685-1750"},{recid:36,fname:"Joseph",lname:"Haydn",sdate:"1732-1809"}]})}},{key:"onBeforeDestroy",value:function(){w2ui.grptestgrid.destroy()}}]),t}(Mn.View);n.default=l},{}],67:[function(e,t,n){
"use strict";var i={locale:"ro-RO",dateFormat:"dd.mm.yyyy",date_display:"dd Mon, yyyy",timeFormat:"h12",currency:"^[\\$]?[-+]?[0-9]*[\\.]?[0-9]+$",currencyPrefix:"RON",currencySuffix:"",groupSymbol:"",float:"^[-]?[0-9]*[\\.]?[0-9]+$",shortmonths:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],fullmonths:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],shortdays:["L","M","M","J","V","S","D"],fulldays:["Luni","Marti","Miercuri","Joi","Vineri","Sambata","Duminica"],dataType:"JSON",phrases:{"Add new record":"Adauga un element","Add New":"Adauga","All Fields":"Toate campurile","Are you sure you want to delete selected records?":"Sigur stergeti integistrarile selectate?","Attach files by dragging and dropping or Click to Select":"Trageti fisiere aici sau apasati pentru a selecta","begins with":"incepand cu",begins:"incepe",between:"intre",in:"in","not in":"nu este in",Confirmation:"Confirmare",contains:"contine","Delete Confirmation":"Confirmare stergere","Delete selected records":"Sterge randurile selectate",Delete:"Sterge","ends with":"se termina in",ends:"se termina",Hide:"Ascunde",is:"este","Line #":"Rand #","Multi Fields":"Multi campo","No items found":"Niciun rezultat",No:"Nu",none:"niciun","Not a float":"Numarul nu este decimal","Not a hex number":"Numarul nu este in format hexadecimal","Not a valid date":"Data invalida","Not a valid email":"Email in format invalid","Not alpha-numeric":"Valorea nu este alfa-numerica","Not an integer":"Numerul nu este intreg","Not in money format":"Format neacceptat",Notification:"Notificare",of:"din",Ok:"Ok","Open Search Fields":"Vizualizare campuri de cautare",Records:"Inregistrari","Refreshing...":"Reincarcare...","Reload data in the list":"Reincarcare lista",Remove:"Renunta","Required field":"Camp obbligatoriu",Reset:"Reset","Restore Default State":"Stare initiala","Return data is not in JSON format. See console for more information.":"Eroare incarcare date - vezi consola pentru informatii",Ripristina:"Inregistrare","Save changed records":"Salveaza inregistrarile modificate","Save Grid State":"Memoreaza starea gridului",Save:"Salveaza","Saving...":"Se salveaza...",Search:"Cauta","Search...":"Cautare...","Select Search Field":"Selectare camp de cautare",Show:"Arata","Show/hide columns":"Arata/Ascunde coloane",Skip:"Sari",Yes:"Da",yesterday:"ieri","No matches":"Niciun rezultat","Type to search....":"Scrieti pentru a cauta..."}};t.exports=i},{}],68:[function(e,t,n){(function(n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){w.start(),console.info("Application started!"),window.Backbone.history.start({pushState:!1})}var a=e("./controller"),o=i(a),l=e("./router"),s=i(l),u=e("./main/models/user"),c=i(u),d=e("./notifications"),p=i(d),f=e("./cereri/cereri"),h=i(f),v=e("./util"),b=i(v),m=e("./config"),y=(i(m),Marionette.Application.extend({region:"#mainLayout"})),g=window.app=n.app=new y,w=new o.default,_=new s.default({controller:w});g.User=new c.default;new p.default;g.controller=w,g.router=_,g.baseUrl="http://localhost:5050/appciv",$.jsPanel.defaults.headerControls.iconfont="w2ui-icons";var x=e("./locale");w2utils.locale(x),localStorage.getItem("userprefs")||localStorage.setItem("userprefs",JSON.stringify({sidebar:"open"})),Backbone.Stickit.addHandler({selector:".w2ui-select",events:["keyup","change","paste","cut"],update:function(e,t){console.log(t),e.w2field().setItemById(t)},getVal:function(e){return e.data("selected").id}}),g.Cereri=new h.default,g.listenTo(g,"app:grid:edited",function(e){var t={text:"Inregistrarea a fost salvata!",title:"Notificare",type:"success-template"};b.default.showNotification(t),w2ui.hasOwnProperty(e.grid)&&w2ui[e.grid].set(e.model.recid,e.model)}),g.listenTo(g,"app:grid:added",function(e){var t={text:"Inregistrarea a fost salvata!",title:"Notificare",type:"success-template"};b.default.showNotification(t),w2ui.hasOwnProperty(e.grid)&&w2ui[e.grid].add(e.model)}),g.on("start",function(e,t){$.ajax({url:e.baseUrl+"/test/checksession",success:function(t){e.User.set(t).set("auth",!0),e.User.trigger("user:login")},error:function(){e.User.set("displayname").set("auth",!1),e.User.trigger("user:login")}}).done(r).fail(r),t.callback()}),t.exports=g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cereri/cereri":25,"./config":64,"./controller":65,"./locale":67,"./main/models/user":70,"./notifications":81,"./router":84,"./util":85}],69:[function(e,t,n){"use strict";var i=Backbone.SModel.extend({idAttribute:"id_user",urlRoot:function(){return app.baseUrl+"/users/profile"}});t.exports=i},{}],70:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.urlRoot=app.baseUrl+"/account/user",n.set("roles",[]),n}return a(t,e),o(t,[{key:"login",value:function(){return app.controller.login()}},{key:"logoff",value:function(){var e=this;$.ajax({url:app.baseUrl+"/account/logoff",type:"POST",success:function(){var t={};t.uid=0,t.displayname="Anonim",t.auth=!1,t.api="unauthorized",t.expert=null,t.id_beneficiar=null,e.set(t),e.set("roles",[]),localStorage.removeItem("session"),requireNode("nw.gui").Window.get().cookies.remove({url:"http://localhost",name:".authDOT"}),window.location.hash="#home",e.trigger("user:login")},error:function(){w2alert("Eroare la delogare!")}})}},{key:"isInRole",value:function(e){return _.intersection(e,this.get("roles")).length>0}},{key:"getRoles",value:function(){}}]),t}(Backbone.Model);n.default=l},{}],71:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return"<h2>Welcome to home view</h2>"},useData:!0})},{"hbsfy/runtime":22}],72:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div id="loginForm">\r\n    <div class="w2ui-page page-0">\r\n        <div class="w2ui-field">\r\n            <label>Username:</label>\r\n            <div>\r\n                <input name="username" type="text" list="usrlist" id="username" maxlength="100" size="30"/>\r\n                <datalist id="usrlist"></datalist>\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label>Password:</label>\r\n            <div>\r\n                <input name="password" type="password" maxlength="100" size="30"/>\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label>Remember:</label>\r\n            <div>\r\n                <input type="checkbox" name="remember">\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="w2ui-buttons">\r\n        <button class="w2ui-btn w2ui-btn-blue" name="save">Login</button>\r\n        <button class="w2ui-btn" name="reset">Cancel</button>\r\n    </div>\r\n</div>'},useData:!0})},{"hbsfy/runtime":22}],73:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div id="userContainer" class="well-centered">\r\n    <div class="w2ui-page page-0">\r\n        <div class="w2ui-field">\r\n            <label>Username:</label>\r\n            <div>\r\n                <input name="username" id="username" type="text" maxlength="100" size="40" readonly/>\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label>Nume afisat:</label>\r\n            <div>\r\n                <input name="user_displayname" id="user_displayname" type="text" maxlength="100" size="40" />\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label>Email:</label>\r\n            <div>\r\n                <input name="email" id="email" type="email" maxlength="100" size="40" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!--Date proxy-->\r\n    <div class="w2ui-page page-1">\r\n        <div class="w2ui-field">\r\n            <label> Activeaza proxy:</label>\r\n            <div>\r\n                <input type="checkbox" name="setupproxy" id="setupproxy" />\r\n                <span class="check"></span>\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label> Protocol(http/https):</label>\r\n            <div>\r\n                <input type="text" name="proxy_protocol" id="proxy_protocol" class="proxydata form-control" disabled="disabled" />\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label> User:</label>\r\n            <div>\r\n                <input type="text" name="proxy_user" id="proxy_user" class="proxydata form-control" disabled="disabled" />\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label> Password:</label>\r\n            <div>\r\n                <input type="password" name="proxy_pass" id="proxy_pass" class="proxydata form-control" disabled="disabled" />\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label> Adresa(ip):</label>\r\n            <div>\r\n                <input type="text" name="proxy_address" id="proxy_address" class="proxydata form-control" disabled="disabled" />\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label> Port:</label>\r\n            <div>\r\n                <input type="text" name="proxy_port" id="proxy_port" class="proxydata form-control" disabled="disabled" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="w2ui-page page-2">\r\n        <div class="w2ui-field">\r\n            <label> Parola curenta:</label>\r\n            <div>\r\n                <input type="password" name="password" id="password" class="form-control" />\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label> Parola noua:</label>\r\n            <div>\r\n                <input type="password" name="newpass" id="newpass" class="form-control" />\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label> Confirma parola:</label>\r\n            <div>\r\n                <input type="password" name="confirmedpass" id="confirmedpass" class="form-control" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!--Date Beneficiar-->\r\n    <div class="w2ui-page page-3">\r\n        <div class="w2ui-field">\r\n            <label>Denumire beneficiar</label>\r\n            <div>\r\n                <input name="company" id="company" type="text" maxlength="150" size="40" />\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label>Adresa:</label>\r\n            <div>\r\n                <textarea name="address" id="address" style="width: 318px; height: 80px; resize: none"></textarea>\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label>Telefon</label>\r\n            <div>\r\n                <input name="telefon" id="telefon" type="text" maxlength="150" size="40" />\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label>Fax</label>\r\n            <div>\r\n                <input name="fax" id="fax" type="text" maxlength="150" size="40" />\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label>Reprezentanti legali</label>\r\n            <div id="grid_rep" style="width:500px;min-height:250px">\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label>Calitate</label>\r\n            <div>\r\n                <input name="calitate" id="calitate" type="text" maxlength="150" size="40" />\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label>Registrul Comertului</label>\r\n            <div>\r\n                <input name="nr_reg_com" id="nr_reg_com" type="text" maxlength="150" size="40" />\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label>CUI</label>\r\n            <div>\r\n                <input name="cui" id="cui" type="text" maxlength="150" size="40" />\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label>IBAN</label>\r\n            <div>\r\n                <input name="cont" id="cont" type="text" maxlength="150" size="40" />\r\n            </div>\r\n        </div>\r\n        <div class="w2ui-field">\r\n            <label>Banca</label>\r\n            <div>\r\n                <input name="banca" id="banca" type="text" maxlength="150" size="40" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="w2ui-buttons">\r\n        <button class="w2ui-btn" name="reset">Resetare cache</button>\r\n        <button class="w2ui-btn w2ui-btn-primary" name="save">Save</button>\r\n    </div>\r\n</div>\r\n<div class="well well-sm well-centered">\r\n    Nota: Pentru modificarea utilizatorilor corespunzatori beneficiarului va rugam sa contactati reprezentantii RAR.\r\n</div>\r\n'},useData:!0})},{"hbsfy/runtime":22}],74:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=nw.App.manifest,s=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.template=!1,n}return a(t,e),o(t,[{key:"onAttach",value:function(){$("#footer").w2toolbar({name:"footerToolbar",height:30,items:[{type:"button",id:"btnSettings",caption:"",icon:"w2ui-icon-cog",hint:"Setari aplicatie",onClick:function(){nw.Window.get().showDevTools()}},{type:"button",id:"btnReload",caption:"",icon:"w2ui-icon-reload",hint:"Refresh",onClick:function(){nw.Window.get().reload(3)}},{type:"spacer",id:"taskbar",html:'<div class="w2taskbar"></div>'},{type:"html",html:"&copy;RAR-DTIC - 2016 - Version "+l.version}],onClick:function(e){"btnMenuUser:btnLogin"===e.target&&(app.User.auth?app.controller.logout():app.controller.login())}}),window.gui&&!window.singleapp&&w2ui.footerToolbar.add({type:"button",id:"newWin",icon:"w2ui-icon-newwindow",hint:"Deschide in fereastra noua",onClick:function(){var e=gui.Window.get(window.open(window.location.hash));e.width=800,e.height=600,e.window.singleapp=!0}})}}]),t}(Mn.View);n.default=s},{}],75:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function n(){i(this,n);var t=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.template=e("./../templates/home.html"),t}return a(n,t),n}(Mn.View);n.default=o},{"./../templates/home.html":71}],76:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./../../util"),u=i(s),c=function(t){function n(t){r(this,n);var i=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,{events:{"input #username":"trysetpass","keyup #loginForm":"submitForm"}}));return i.template=e("./../templates/login.html"),i.rememberedUsers=u.default.rememberedUsers,i}return o(n,t),l(n,[{key:"show",value:function(){var e=$.Deferred(),t=this;return this.panel=$.jsPanel({paneltype:"modal",headerTitle:"Autentificare",id:"loginpanel",resizable:!1,contentSize:"400 180",headerControls:{controls:"closeonly"},content:t.render().el,onclosed:t.destroyHandler.bind(t,function(){e.resolve()}),callback:t.initHandler.bind(t)}),e.promise()}},{key:"destroyHandler",value:function(e){app.User.trigger("user:login"),w2ui.loginform.destroy(),this.destroy(),e()}},{key:"initHandler",value:function(){var e=this;this.model=app.User,this.$el.w2form({name:"loginform",url:"server/post",fields:[{field:"username",type:"text",required:!0},{field:"password",type:"text",required:!0},{field:"remember",type:"checkbox"}],record:e.model.toJSON(),actions:{reset:function(){this.clear(),e.panel.close()},save:e.loginHandler.bind(e)}}),this.rememberedUsers.map(function(e){$("#usrlist").append('<option value="'+e.u+'"></option>')})}},{key:"loginHandler",value:function(){var e=this;console.log(w2ui.loginform.validate()),0===w2ui.loginform.validate().length&&$.ajax({url:app.baseUrl+"/account/login",type:"POST",data:w2ui.loginform.record,dataType:"json",success:function(t){e.model.set(t).set("auth",!0),w2ui.loginform.record.remember&&u.default.updateUserInDataList({u:w2ui.loginform.record.username,p:w2ui.loginform.record.password}),e.panel.close()},error:function(e){$.jsPanel({paneltype:"hint",content:"<div><i class='w2ui-icon-info' style='margin:auto; color:red'></i></div><div><p style='margin:auto;'>Date autentificare incorecte!</p></div><div><i class='w2ui-icon-cross'></i></div>",theme:"red",headerRemove:!0,contentSize:"200 50",callback:function(e){this.content.css({display:"flex",color:"red"}),$("div",this.content).eq(1).css({display:"flex",fontWeight:"bold",textAlign:"center"}),$("div",this.content).eq(2).css({display:"flex",flexDirection:"row-reverse",alignItems:"flex-start",fontSize:"18px",width:"45px",padding:"4px"}),$("div",this.content).eq(2).find("i").css({cursor:"pointer"}).click(function(){e.close()})}})}})}},{key:"submitForm",value:function(e){console.log("here");var t=this;13===e.which&&t.$el.find('[name="save"]').click()}},{key:"trysetpass",value:function(e){var t=_.findWhere(this.rememberedUsers,{u:$(e.currentTarget).val()});t?($("#password").val(t.p),w2ui.loginform.record.password=t.p):($("#password").val(""),w2ui.loginform.record.password="")}}]),n}(Mn.View);n.default=c},{"./../../util":85,"./../templates/login.html":72}],77:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_util=require("./../../util"),_util2=_interopRequireDefault(_util),Profile=function(_Mn$View){function Profile(e){_classCallCheck(this,Profile);var t=$.extend(e,{className:"fullscreen",events:{"click #btnSaveProfile":"save","click #btnChangePass":"showpasschange","change #setupproxy":"enableproxysetup","click #btnReset":"resetapp"}}),n=_possibleConstructorReturn(this,(Profile.__proto__||Object.getPrototypeOf(Profile)).call(this,t));return n.template=require("./../templates/profile.html"),n.bindings={'[name="username"]':"username","#user_displayname":"user_displayname","#address":{observe:"beneficiar",onGet:function(e){return this.model.get("beneficiar").adresa2},onSet:function(e){return this.model.get("beneficiar").adresa2=e,this.model.get("beneficiar")}},"#company":{observe:"beneficiar",onGet:function(e){return this.model.get("beneficiar").denumire_beneficiar},onSet:function(e){return this.model.get("beneficiar").denumire_beneficiar=e,this.model.get("beneficiar")}},"#telefon":{observe:"beneficiar",onGet:function(e){return this.model.get("beneficiar").telefon},onSet:function(e){return this.model.get("beneficiar").telefon=e,this.model.get("beneficiar")}},"#fax":{observe:"beneficiar",onGet:function(e){return this.model.get("beneficiar").fax},onSet:function(e){return this.model.get("beneficiar").fax=e,this.model.get("beneficiar")}},"#cont":{observe:"beneficiar",onGet:function(e){return this.model.get("beneficiar").cont},onSet:function(e){return this.model.get("beneficiar").cont=e,this.model.get("beneficiar")}},"#banca":{observe:"beneficiar",onGet:function(e){return this.model.get("beneficiar").banca},onSet:function(e){return this.model.get("beneficiar").banca=e,this.model.get("beneficiar")}},"#nr_reg_com":{observe:"beneficiar",onGet:function(e){return this.model.get("beneficiar").atribut_fiscal},onSet:function(e){return this.model.get("beneficiar").atribut_fiscal=e,this.model.get("beneficiar")}},"#calitate":{observe:"beneficiar",onGet:function(e){return this.model.get("beneficiar").calitate},onSet:function(e){return this.model.get("beneficiar").calitate=e,this.model.get("beneficiar")}},"#cui":{observe:"beneficiar",onGet:function(e){return this.model.get("beneficiar").cod_fiscal},onSet:function(e){return this.model.get("beneficiar").cod_fiscal=e,this.model.get("beneficiar")}},"#email":"email","#password":"password","#newpass":"newpass","#confirmedpass":"confirmedpass","#setupproxy":"setupproxy","#proxy_protocol":"proxy_protocol","#proxy_user":"proxy_user","#proxy_pass":"proxy_pass","#proxy_address":"proxy_address","#proxy_port":"proxy_port"},n.hasproxy=!1,n}return _inherits(Profile,_Mn$View),_createClass(Profile,[{key:"onAttach",value:function(){var e=this,t=require("./../models/profile");this.model=new t({id:app.User.id}),this.model.fetch().then(function(){e.buildView(),e.stickit()}),this.model.on("change",this.modelchanged)}},{key:"resetapp",value:function(){localStorage.clear()}},{key:"buildView",value:function(){var e=this;console.log(this.model),this.setinitialproxy();var t=[{id:"tab1",caption:"General"},{id:"tab2",caption:"Proxy"},{id:"tab3",caption:"Schimbare parola"}];$("#userContainer").w2form({name:"userContainer",tabs:t,actions:{reset:function(){e.resetapp()},save:function(){0===this.validate().length&&e.save()}}}),w2ui.userContainer_tabs.on("click",function(e){"tab4"===e.target&&w2ui.gridReprezentanti.refresh()})}},{key:"showpasschange",value:function(e){e.preventDefault();var t=this;t.canceled=!1,$("#changepassContainer").show("blind"),$(e.currentTarget).replaceWith('<button id="btnCancelPass" class="btn btn-danger">Renunta la schimbarea parolei</button>'),$("#btnCancelPass").on("click",function(e){t.canceled=!0,t.model.set("newpass","").set("confirmedpass",""),$("#changepassContainer").hide("blind"),$(e.currentTarget).replaceWith('<button id="btnChangePass" class="btn btn-primary">Schimba parola</button>')})}},{key:"enableproxysetup",value:function(e){var t=this;$(e.currentTarget).prop("checked")?(t.hasproxy=!0,$(".proxydata").prop("disabled",null)):(t.hasproxy=!1,$(".proxydata").prop("disabled","disabled"))}},{key:"setinitialproxy",value:function(){var e=JSON.parse(localStorage.getItem("proxy"))||null;e&&e.enabled&&(this.model.set("setupproxy",e.enabled),this.model.set(e),$(".proxydata").prop("disabled",null))}},{key:"setproxy",value:function(){var e={enabled:$("#setupproxy").prop("checked"),proxy_protocol:$("#proxy_protocol").val(),proxy_user:$("#proxy_user").val(),proxy_pass:$("#proxy_pass").val(),proxy_address:$("#proxy_address").val(),proxy_port:$("#proxy_port").val()};localStorage.setItem("proxy",JSON.stringify(e))}},{key:"modelchanged",value:function(e){var t=this,n=_.keys(e.changed)[0],i=_.values(e.changed)[0];if(t.inerror=!1,"newpass"===n){var r=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])\w{6,}$/;if(!r.test(i)){t.inerror=!t.canceled;var a=[{name:"newpass",message:"Minim 6 caractere, o cifra si un caracter majuscul"}];_util2.default.showError(a)}}if("confirmedpass"===n&&i!==e.get("newpass")){t.inerror=!t.canceled;var a=[{name:"confirmedpass",message:"Valoarea introdusa nu este identica cu parola de mai sus"}];_util2.default.showError(a)}t.inerror||$("#btnSaveProfile").attr("disabled",null)}},{key:"save",value:function save(e){var self=this;self.setproxy();var options={success:function(e){app.User.set("displayname",e.get("user_displayname"));var t={title:"Notificare",text:"Inregistrarea a fost salvata!",type:"success-template"};_util2.default.showNotification(t)},error:function error(model,response){if(403!==Number(response.status)&&401!==Number(response.status)){var data=eval("("+response.responseText+")");w2utils.validateRaw($(self.el),data)}}};self.validate()&&self.model.save({},options)}},{key:"validate",value:function(){if(this.model.get("newpass")){var e=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])\w{6,}$/;if(!e.test(this.model.get("newpass"))){var t=[{name:"newpass",message:"Minim 6 caractere, o cifra si un caracter majuscul"}];return _util2.default.showError(t),!1}if(this.model.get("confirmedpass")!=this.model.get("newpass")){var t=[{name:"confirmedpass",message:"Valoarea introdusa nu este identica cu parola de mai sus"}];return _util2.default.showError(t),!1}}return!!w2utils.validate(this.model,this.$el)}},{key:"onBeforeDestroy",value:function(){w2ui.userContainer.destroy()}}]),Profile}(Mn.View);exports.default=Profile},{"./../../util":85,"./../models/profile":69,"./../templates/profile.html":73}],78:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./toolbar"),u=i(s),c=e("./footer"),d=i(c),p=e("./sidebar"),f=i(p),h=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.template=_.template("Main"),e.className="fullscreen",e}return o(t,e),l(t,[{key:"onAttach",value:function(){console.log("Main view");this.$el.css({height:"100%"}),this.$el.w2layout({name:"layout",panels:[{type:"top",content:'<div id="topmenu" style="height:30px"></div>',size:30},{type:"left",size:200,resizable:!0,minSize:35,content:'<div id="sidebar" style="height:100%"></div>'},{type:"right",content:'<div id="modalContainer"></div>',hidden:!0},{type:"main",content:'<div id="main" class="fullscreen"></div>'},{type:"bottom",size:30,content:'<div id="footer"></div>'}]}),this.addRegions({menu:"#topmenu",container:"#main",sidebar:"#sidebar",modal:"#modalContainer",footer:"#footer"}),this.showChildView("menu",new u.default),this.showChildView("footer",new d.default);var e=new f.default;app.sidebar=e,this.showChildView("sidebar",e)}}]),t}(Mn.View);n.default=h},{"./footer":74,"./sidebar":79,"./toolbar":80}],79:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=requireNode("nw.gui"),s=JSON.parse(localStorage.getItem("userprefs")),u=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.template="#sidebar",e.lastWidth=w2ui.layout.get("left").size,e.listenTo(app.User,"user:login",e.refreshNodes),e.authorizedNodes=["profile","logoff","cereri"],e}return a(t,e),o(t,[{key:"onAttach",value:function(){var e=this;this.$el.css({height:"100%"}),this.$el.w2sidebar({name:"sidebar",flatButton:!0,topHTML:'<div id="sidebartop" style="background-color: #eee; padding: 10px 5px; border-bottom: 1px solid silver">Application menu</div>',nodes:[{id:"general",text:"General",group:!0,expanded:!0,nodes:[{id:"showdev",text:"Debug",img:"w2ui-icon-wrench",hidden:!app.User.isInRole([1]),roles:[1],onClick:function(){l.Window.get().showDevTools()}},{id:"about",text:"Info",img:"w2ui-icon-info",route:"/info"},{id:"reload",
text:"Reload",img:"w2ui-icon-repeat",onClick:function(){l.Window.get().reload(3)}},{id:"closeapp",text:"Iesire",img:"w2ui-icon-off",onClick:function(){l.Window.get().close()}}]},{id:"user",text:"Utilizator",group:!0,expanded:!0,nodes:[{id:"login",text:"Login",hidden:app.User.get("auth"),onClick:app.controller.login,img:"w2ui-icon-unlock"},{id:"logoff",text:"Logoff",hidden:!app.User.get("auth"),onClick:app.controller.logoff,img:"w2ui-icon-lock"},{id:"profile",text:"Profile",hidden:!app.User.get("auth"),route:"/profile",img:"w2ui-icon-user"}]},{id:"cereri",text:"Comenzi C.I.V.",group:!0,expanded:!0,hidden:!app.User.get("auth"),nodes:[{id:"listacereri",text:"Lista comenzi",route:"/cereri/index",img:"w2ui-icon-columns"},{id:"plati",text:"Incasari",route:"/cereri/plati",img:"w2ui-icon-eur"},{id:"listasfarsitserie",text:"Sfarsit de serie",route:"/cereri/sfarsitSerie",img:"w2ui-icon-list"}]}],onClick:function(e){},onFlat:function(t){t.onComplete=function(){t.goFlat?(e.lastWidth=w2ui.layout.get("left").size,$("#sidebartop").hide(),s.sidebar="flat"):($("#sidebartop").show(),s.sidebar="open"),localStorage.setItem("userprefs",JSON.stringify(s))},w2ui.layout.sizeTo("left",t.goFlat?35:e.lastWidth)},onRender:function(){"flat"===s.sidebar&&this.goFlat()}})}},{key:"refreshNodes",value:function(){app.User.get("auth")?(this.authorizedNodes.map(function(e){w2ui.sidebar.show(e)}),w2ui.sidebar.hide("login")):(this.authorizedNodes.map(function(e){w2ui.sidebar.hide(e)}),w2ui.sidebar.show("login")),this.setNodesByPermission(w2ui.sidebar.nodes)}},{key:"setNodesByPermission",value:function(e){var t=this;e.map(function(e){e.roles&&(app.User.isInRole(e.roles)?w2ui.sidebar.show(e.id):w2ui.sidebar.hide(e.id)),e.nodes&&t.setNodesByPermission(e.nodes)})}}]),t}(Mn.View);n.default=u},{}],80:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.template=_.template("Toolbar"),n.bindings={"#lblusername":"displayname"},n.model=app.User,n}return a(t,e),o(t,[{key:"onAttach",value:function(){this.$el.w2toolbar({name:"appToolbar",items:[{type:"html",id:"apptitle",html:'<div style="font-size: 16px;\n\t\t\t\t\t\t\t\t\t\t\t\tvertical-align: middle;\n    \t\t\t\t\t\t\t\t\t\theight: 25px;\n    \t\t\t\t\t\t\t\t\t\tpadding: 5px;"">\n\t\t\t\t\t\t\t\t\t\t\t\t<b>'+nw.App.manifest.window.title+"</b>\n\t\t\t\t\t\t\t</div>"},{type:"spacer"},{type:"html",id:"userstatus",html:'User: <label id="lblusername" style="padding-right:10px"></label>'}],onClick:function(){}}),this.stickit()}}]),t}(Marionette.View);n.default=l},{}],81:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.channelName="notify",e.radioRequests={"show:success":"showSuccessMessage","show:error":"showErrorMessage"},e.radioEvents={"user:logged:in":"refreshUserAreas","user:logged:out":"refreshUserAreas"},e}return a(t,e),o(t,[{key:"showSuccessMessage",value:function(e){}},{key:"showErrorMessage",value:function(e){}},{key:"refreshUserAreas",value:function(e){w2alert("info"),app.sidebar.refreshNodes()}}]),t}(Mn.Object);n.default=l},{}],82:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=e("./util"),l=i(o),s=e("./config"),u=i(s),c=requireNode("fs"),d=requireNode("request"),p=requireNode("path"),f=requireNode("http"),h=requireNode("https"),v=function(){function e(){r(this,e)}return a(e,[{key:"startServer1",value:function(){function e(e,t){console.log("serve: "+e.url),console.log(e);var n=l.default.enviroment,i=e.url.split("/")[1],r=e.url.split("/"),a=r.splice(2,r.length).join("/"),o=u.default.modules[i];switch(n){case"dev":var s=o.dev_server;break;case"prod_ext":var s=o.external_server;break;case"prod_int":var s=o.intranet_server;break;default:var s=o.dev_server}var d=s.replace("/civapi","").split(":"),v=d[1].replace("//",""),b=d[2].replace("/","");console.log(v+b);var m={hostname:v,port:b,path:s+a,method:e.method,headers:e.headers};if("prod_ext"===n){var y,g=c.readFileSync(p.resolve("./key.pfx")),w="rarom",_=localStorage.getItem("proxy");if(_){var x=JSON.parse(_);y=x.enabled?x.proxy_protocol+"://"+(x.proxy_user?x.proxy_user:"")+(x.proxy_pass?":"+x.proxy_pass+"@":"")+x.proxy_address+(x.proxy_port?":"+x.proxy_port:""):null}m.rejectUnauthorized=!1,m.pfx=g,m.passphrase=w;f.request({host:"80.86.99.115",port:3128,method:"CONNECT",path:s}).on("connect",function(n,i,r){m.socket=i,m.agent=!1;var a=h.request(m,function(e){n.pipe(t,{end:!0})});e.pipe(a,{end:!0})}).end()}else{var k=f.request(m,function(e){e.pipe(t,{end:!0})});e.pipe(k,{end:!0})}}f.createServer(e).listen(5050)}},{key:"startServer2",value:function(){f.createServer(function(e,t){sys.log(e.connection.remoteAddress+": "+e.method+" "+e.url);var n=f.createClient(80,e.headers.host),i=n.request(e.method,e.url,e.headers);i.addListener("response",function(e){e.addListener("data",function(e){t.write(e,"binary")}),e.addListener("end",function(){t.end()}),t.writeHead(e.statusCode,e.headers)}),e.addListener("data",function(e){i.write(e,"binary")}),e.addListener("end",function(){i.end()})}).listen(5050)}},{key:"startServer",value:function(){console.log(l.default.getExePath());var e,t=c.readFileSync(p.resolve("./key.pfx")),n="rarom",i=localStorage.getItem("proxy"),r={},a=l.default.enviroment;if("prod_ext"===a){if(i){var o=JSON.parse(i);e=o.enabled?o.proxy_protocol+"://"+(o.proxy_user?o.proxy_user:"")+(o.proxy_pass?":"+o.proxy_pass+"@":"")+o.proxy_address+(o.proxy_port?":"+o.proxy_port:""):null}r={rejectUnauthorized:!1,pfx:t,passphrase:n,proxy:e}}var s=d.defaults(r),h=f.createServer(function(e,t){var n=e.url.split("/")[1],i=e.url.split("/"),r=i.splice(2,i.length).join("/"),o=u.default.modules[n];switch(a){case"dev":var l=o.dev_server;break;case"prod_ext":var l=o.external_server;break;case"prod_int":var l=o.intranet_server;break;default:var l=o.dev_server}console.log(l+r+"/"),e.pipe(s(l+r)).pipe(t)});h.listen(5050),h.on("error",function(e){"ECONNREFUSED"===e&&alert("Eroare de conexiune - Verificati setarile proxy")})}},{key:"setAjaxOptions",value:function(){$.ajaxPrefilter(function(e,t,n){t._retry=isNaN(t._retry)?l.default.maxExpiredAuthorizationRetries:t._retry-1,t.error&&(t._error=t.error),e.error=$.noop();var i=$.Deferred();return n.done(i.resolve),n.fail(function(){var e=Array.prototype.slice.call(arguments);401===n.status&&t._retry>0?(localStorage.removeItem("session"),l.default.handleUnauthorized().done(function(){$.ajax(t).then(i.resolve,i.reject)})):(t._error&&i.fail(t._error),i.rejectWith(n,e))}),i.promise(n)})}}]),e}();n.default=new v},{"./config":64,"./util":85}],83:[function(e,t,n){"use strict";var i=requireNode("fs"),r=requireNode("request"),a=(e("./util"),requireNode("path")),o={setproxy:function(e,t){var n=this;console.log(e),this.address="",this.port="";var r=/(.+):\s?([0-9]+)/,o=r.exec(e);o?(this.address=o[1],this.port=o[2]):(w2alert("Va rugam verificati setarile proxy ale aplicatiei!"),t());var l,s,u=i.readFileSync(a.resolve("./key.pfx")),c="rarom",d=localStorage.getItem("proxy");d?(s=JSON.parse(d),s.enabled&&(l=s.proxy_protocol+"://"+(s.proxy_user?s.proxy_user:"")+(s.proxy_pass?":"+s.proxy_pass+"@":"")+s.proxy_address+(s.proxy_port?":"+s.proxy_port:""))):l="http://"+this.address+":"+this.port;var p={rejectUnauthorized:!1,pfx:u,passphrase:c,proxy:l,timeout:5e3};this.tryAccess(p,function(e){if(e)t();else{var i=s?s.proxy_user:"";n.requestProxyCredentials(n.address,i,function(e){var i={enabled:!0,proxy_protocol:"http",proxy_user:e.user,proxy_pass:e.pass,proxy_address:n.address,proxy_port:n.port};localStorage.setItem("proxy",JSON.stringify(i)),p.proxy="http://"+(e.user?e.user:"")+(e.pass?":"+e.pass+"@":"")+n.address+":"+n.port,n.tryAccess(p,function(e){e?t():(w2alert("Va rugam verificati setarile proxy ale aplicatiei!"),t())})})}})},tryAccess:function(e,t){var n=r.defaults(e);n.get("http://google.ro").on("response",function(e){t(407===e.statusCode?!1:!0)}).on("error",function(e){console.log(e),t(!1)})},requestProxyCredentials:function(e,t,n){var i='<div>\n            <p style="text-align:center">Serverul proxy \' + address + \' necesita autentificare!</p>\n            <div class="w2ui-field">\n\t\t\t\t\t\t\t<label>Username:</label>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<input type="text" id="uname" value="\' + user + \'" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n            <div class="w2ui-field">\n\t\t\t\t\t\t\t<label>Password:</label>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<input type="password" id="pwd" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n        </div>';$.jsPanel({id:"proxy",paneltype:"modal",headerTitle:"Setari proxy",contentSize:"430 150",resizable:!1,headerControls:{controls:"closeonly"},content:i,theme:"#1356A9",footerToolbar:[{item:'<button type="button"></button>',event:"click",btnclass:"w2ui-btn w2ui-btn-blue",btntext:" Ok",callback:function(e){e.data.close()}}],callback:function(e){$("#uname").val(t)},onbeforeclose:function(e){var t={user:$("#uname").val(),pass:$("#pwd").val()};n(t)}})}};t.exports=o},{"./util":85}],84:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=Marionette.AppRouter.extend({appRoutes:{home:"home",profile:"profile",settings:"settings",info:"info","*action":"home"}});n.default=i},{}],85:[function(e,t,n){(function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=(requireNode("path"),requireNode("fs")),l=function(n){function l(){t(this,l);var e=i(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return e.env="dev",e.usersDataList=e.getUserListFromStore(),e}return r(l,n),a(l,[{key:"getUserListFromStore",value:function(){var e=localStorage.getItem("ulist");return e?JSON.parse(this.base64Decode(e)):[]}},{key:"getAppPath",value:function(){var e=window.document.createElement("a");e.href=window.location.href;var t=e.pathname,n=t.split("/");n.pop();var i=e.origin+n.join("/")+"/";return e=null,i}},{key:"updateUserInDataList",value:function(e){var t=_.findWhere(this.usersDataList,{u:e.username});t?t.p=e.password:this.usersDataList.push(e),localStorage.setItem("ulist",this.base64Encode(JSON.stringify(this.usersDataList)))}},{key:"showNotification",value:function(e){var t={};switch(e.type){case"error-template":t.icon=this.getAppPath()+"assets/alert-error.png";break;case"info-template":t.icon=this.getAppPath()+"assets/alert-info.png";break;case"success-template":t.icon=this.getAppPath()+"assets/alert-success.png";break;case"warning-template":t.icon=this.getAppPath()+"assets/alert-warning.png";break;default:t.icon=this.getAppPath()+"assets/alert-info.png"}t.body=e.text;var n=new Notification(e.title,t);n.onclick=function(){},n.onshow=function(){setTimeout(function(){n.close()},5e3)}}},{key:"handleUnauthorized",value:function(){return app.User.login()}},{key:"base64Encode",value:function(e){return btoa(e)}},{key:"base64Decode",value:function(e){return atob(e)}},{key:"getExePath",value:function(){return e.execPath}},{key:"getAppPath",value:function(){var e=window.document.createElement("a");e.href=window.location.href;var t=e.pathname,n=t.split("/");n.pop();var i=e.origin+n.join("/")+"/";return e=null,i}},{key:"downloadFile",value:function(e,t,n,i){this.getRequestCookie().then(function(r){var a=requireNode("request");w2utils.lock("#mainLayout","Se exporta datele....");a({url:e,method:t,headers:{Cookie:r.name+"="+r.value},json:n}).on("response",function(e){var t=o.createWriteStream(i);e.pipe(t),e.on("end",function(){w2utils.unlock("#mainLayout"),w2alert("Fiserul a fost descarcat!")})})})}},{key:"downloadPDF",value:function(e){var t=document.getElementById("download_iframe");t||(t=document.createElement("iframe"),t.id="download_iframe",t.style.display="none",document.body.appendChild(t)),t.src=e,t.addEventListener("load",function(){console.log("FILE LOAD DONE.. Download should start now")})}},{key:"getRequestCookie",value:function(){var e=$.Deferred(),t=localStorage.getItem("session");if(t){var n=JSON.parse(t);n.url="http://localhost",delete n.hostOnly,delete n.session,e.resolve(n)}else nw.Window.get().cookies.get({url:"http://localhost",name:".authDOT"},function(t){t.url="http://localhost",delete t.hostOnly,delete t.session,e.resolve(t)});return e.promise()}},{key:"printPDF",value:function(e,t){var n=this;this.getRequestCookie().then(function(i){var r=escape(e);nw.Window.open(n.getAppPath()+"/pdfviewer/index.html",{width:800,height:600},function(e){t&&t(e),e.data={file:r,cookie:i}})})}},{key:"showError",value:function(e){$.each(e,function(e,t){$("#"+t.name).w2tag(t.message,{class:"w2ui-error"})})}},{key:"enviroment",set:function(e){this.env=e},get:function(){return this.env}},{key:"rememberedUsers",get:function(){return this.usersDataList}},{key:"maxExpiredAuthorizationRetries",get:function(){return 3}}]),l}(Mn.Object);n.default=new l}).call(this,e("_process"))},{_process:2}]},{},[23]);